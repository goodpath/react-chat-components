/*! For license information please see main.b89ec626.chunk.js.LICENSE.txt */
(this["webpackJsonp@pubnub/react-chat-component-samples"]=this["webpackJsonp@pubnub/react-chat-component-samples"]||[]).push([[0],{29:function(e){e.exports=JSON.parse('[{"name":"Mark Kelley","custom":{"title":"Office Assistant"},"email":null,"eTag":"AYGyoY3gre71eA","externalId":null,"id":"user_63ea15931d8541a3bd35e5b1f09087dc","profileUrl":"https://randomuser.me/api/portraits/men/1.jpg","updated":"2020-09-23T09:23:34.598494Z"},{"name":"Anna Gordon","custom":{"title":"VP Marketing"},"email":null,"eTag":"AZDyqJ7andTHlAE","externalId":null,"id":"user_3c4400761cba4b65b77b6cae55fc21eb","profileUrl":"https://randomuser.me/api/portraits/women/1.jpg","updated":"2020-09-23T09:23:33.598365Z"},{"name":"Luis Griffin","custom":{"title":"Environmental Tech"},"email":null,"eTag":"AeTqgs2X16ql2wE","externalId":null,"id":"user_def709b1adfc4e67b98bb7a820f581b1","profileUrl":"https://randomuser.me/api/portraits/men/2.jpg","updated":"2020-09-23T09:23:31.809198Z"},{"name":"Sue Flores","custom":{"title":"VP Sales"},"email":null,"eTag":"Acmf1d+vmczaKw","externalId":null,"id":"user_a56c20222c484ff8987ec9b69b0c8f5b","profileUrl":"https://randomuser.me/api/portraits/women/2.jpg","updated":"2020-09-23T09:23:31.837372Z"},{"name":"Luke Young","custom":{"title":"Product Engineer"},"email":null,"eTag":"AczQlJSt5Zn9jAE","externalId":null,"id":"user_e0e43601f93249c382415521188f0208","profileUrl":"https://randomuser.me/api/portraits/men/3.jpg","updated":"2020-09-23T09:23:36.617721Z"},{"name":"Jenny Porter","custom":{"title":"Engineer"},"email":null,"eTag":"AZSThaqOxP67Rg","externalId":null,"id":"user_ed145d8b0f094b83a2d51d428a59d0cb","profileUrl":"https://randomuser.me/api/portraits/women/3.jpg","updated":"2020-09-23T09:23:32.810646Z"},{"name":"Ethan Murray","custom":{"title":"Actuary"},"email":null,"eTag":"AeGljfOQhoCH9AE","externalId":null,"id":"user_732277cad5264ed48172c40f0f008104","profileUrl":"https://randomuser.me/api/portraits/men/4.jpg","updated":"2020-09-23T09:23:33.586556Z"},{"name":"Victoria Torres","custom":{"title":"Professor"},"email":null,"eTag":"AYi09PWh7/eyowE","externalId":null,"id":"user_142da3c419804a82a3057cedc86acaa6","profileUrl":"https://randomuser.me/api/portraits/women/4.jpg","updated":"2020-09-23T09:23:34.284924Z"},{"name":"Caleb Nichols","custom":{"title":"Environmental Tech"},"email":null,"eTag":"AcXb44a+3tLrTg","externalId":null,"id":"user_0149372b160544cf981b6284dd2b5e45","profileUrl":"https://randomuser.me/api/portraits/men/5.jpg","updated":"2020-09-23T09:23:36.518618Z"},{"name":"Cathy Grant","custom":{"title":"Registered Nurse"},"email":null,"eTag":"AZTSoo3LkIPGCA","externalId":null,"id":"user_47557ad75d4047efab1b6577cec3efe7","profileUrl":"https://randomuser.me/api/portraits/women/5.jpg","updated":"2020-09-23T09:23:36.50655Z"},{"name":"Rafael Gardner","custom":{"title":"Health Coach"},"email":null,"eTag":"AbH9z9zTttLciwE","externalId":null,"id":"user_7261c27b34954ece93ac0d8a15520591","profileUrl":"https://randomuser.me/api/portraits/men/6.jpg","updated":"2020-09-23T09:23:33.821448Z"},{"name":"Heather Mason","custom":{"title":"Mechanical Systems Engineer"},"email":null,"eTag":"AaLhhI6p192/jgE","externalId":null,"id":"user_a673547880824a0687b3041af36a5de4","profileUrl":"https://randomuser.me/api/portraits/women/6.jpg","updated":"2020-09-23T09:23:31.841481Z"},{"name":"Raul Day","custom":{"title":"Compensation Analyst"},"email":null,"eTag":"AYzmn9ST0rKCrgE","externalId":null,"id":"user_4e2f18aba20640cf922c8bc485941f8e","profileUrl":"https://randomuser.me/api/portraits/men/7.jpg","updated":"2020-09-23T09:23:36.322654Z"},{"name":"Ethel Barnett","custom":{"title":"Help Desk Technician"},"email":null,"eTag":"AcHyhfyn5syQ/gE","externalId":null,"id":"user_f32ea4a710104c06ad5858b0e22cfc88","profileUrl":"https://randomuser.me/api/portraits/women/7.jpg","updated":"2020-09-23T09:23:33.871708Z"},{"name":"Lucas Boyd","custom":{"title":"Social Worker"},"email":null,"eTag":"AYG7mdvtxJO2CQ","externalId":null,"id":"user_8e92a37f342b482facd1eebbd782006a","profileUrl":"https://randomuser.me/api/portraits/men/8.jpg","updated":"2020-09-23T09:23:34.296878Z"},{"name":"Ellen Harvey","custom":{"title":"Software Engineer"},"email":null,"eTag":"AeiApdiFiom1+AE","externalId":null,"id":"user_efc5b3ef96ea4bffbde733e249c8cbb3","profileUrl":"https://randomuser.me/api/portraits/women/8.jpg","updated":"2020-09-23T09:23:33.942047Z"},{"name":"Bradley Chapman","custom":{"title":"Registered Nurse"},"email":null,"eTag":"AcaEgNaSzcuovQE","externalId":null,"id":"user_2ada61d287aa42b59d620c474493474f","profileUrl":"https://randomuser.me/api/portraits/men/9.jpg","updated":"2020-09-23T09:23:31.804995Z"},{"name":"Meghan Franklin","custom":{"title":"VP Product Management"},"email":null,"eTag":"AZuJzrKo5NP6Kw","externalId":null,"id":"user_0a0579891c7148009ec254f7ae2e6367","profileUrl":"https://randomuser.me/api/portraits/women/9.jpg","updated":"2020-09-23T09:23:32.747753Z"},{"name":"Armando Coleman","custom":{"title":"Pharmacist"},"email":null,"eTag":"AZuf4vDb7seI9AE","externalId":null,"id":"user_f5735bcc168445c38978e46969bc0019","profileUrl":"https://randomuser.me/api/portraits/men/10.jpg","updated":"2020-09-23T09:23:33.2179Z"},{"name":"Sue Jones","custom":{"title":"Desktop Support Technician"},"email":null,"eTag":"AZi01cCxr8eo5AE","externalId":null,"id":"user_912210948aa849eda2c3e0c2b58355e6","profileUrl":"https://randomuser.me/api/portraits/women/10.jpg","updated":"2020-09-23T09:23:34.54631Z"},{"name":"Caleb Tucker","custom":{"title":"Sales Representative"},"email":null,"eTag":"AYz+8bLNmqnmJg","externalId":null,"id":"user_d43bfea6e4234f84ab377d664edf2576","profileUrl":"https://randomuser.me/api/portraits/men/11.jpg","updated":"2020-09-23T09:23:33.064427Z"},{"name":"Courtney Miles","custom":{"title":"Account Executive"},"email":null,"eTag":"AZ6VvZ23q/yDKA","externalId":null,"id":"user_fb9ca56c8d3547268f2d589a6fcb1556","profileUrl":"https://randomuser.me/api/portraits/women/11.jpg","updated":"2020-09-23T09:23:36.59231Z"},{"name":"Patrick Simpson","custom":{"title":"Account Executive"},"email":null,"eTag":"AcevkZXQ3pmshAE","externalId":null,"id":"user_5500315bf0a34f9b9dfa0e4fffcf49c2","profileUrl":"https://randomuser.me/api/portraits/men/12.jpg","updated":"2020-09-23T09:23:32.184222Z"},{"name":"Marie Harper","custom":{"title":"Technical Writer"},"email":null,"eTag":"Ad2mzoKft7HsWQ","externalId":null,"id":"user_0368d27f4d514079bc5cfd5678ec1fe7","profileUrl":"https://randomuser.me/api/portraits/women/12.jpg","updated":"2020-09-23T09:23:32.180254Z"},{"name":"Tom Martinez","custom":{"title":"Product Engineer"},"email":null,"eTag":"Ad/X1fzkiOTFzwE","externalId":null,"id":"user_83647bfb6bcd412d93b1e57e1b602d3a","profileUrl":"https://randomuser.me/api/portraits/men/13.jpg","updated":"2020-09-23T09:23:31.848064Z"},{"name":"Martha Ward","custom":{"title":"Staff Scientist"},"email":null,"eTag":"AaTXkO3chPGd3AE","externalId":null,"id":"user_1bc564bcaa4a476e8392c4c8e2b92983","profileUrl":"https://randomuser.me/api/portraits/women/13.jpg","updated":"2020-09-23T09:23:33.484384Z"},{"name":"Stephen West","custom":{"title":"Nurse Practicioner"},"email":null,"eTag":"Acyi+ufEqbOT7QE","externalId":null,"id":"user_608169810dc143998c7964485415a5c7","profileUrl":"https://randomuser.me/api/portraits/men/14.jpg","updated":"2020-09-23T09:23:33.606653Z"},{"name":"Claudia Andrews","custom":{"title":"Compensation Analyst"},"email":null,"eTag":"AfqrqJ3otvCk8QE","externalId":null,"id":"user_4190b08bba444ec58beda6637361cfdb","profileUrl":"https://randomuser.me/api/portraits/women/14.jpg","updated":"2020-09-23T09:23:33.612298Z"},{"name":"Jon Warren","custom":{"title":"Registered Nurse"},"email":null,"eTag":"AYjs1ImXqfrDqQE","externalId":null,"id":"user_363d9255193e45f19513f4bfa9901fbe","profileUrl":"https://randomuser.me/api/portraits/men/15.jpg","updated":"2020-09-23T09:23:33.480424Z"},{"name":"Veronica Barrett","custom":{"title":"Programmer"},"email":null,"eTag":"AZuL1I+IxJPm4gE","externalId":null,"id":"user_4ec689d24845466e93ee358c40358473","profileUrl":"https://randomuser.me/api/portraits/women/15.jpg","updated":"2020-09-23T09:23:31.819548Z"}]')},4:function(e,n,t){"use strict";(function(e,r){t.d(n,"a",(function(){return Qn})),t.d(n,"b",(function(){return xn})),t.d(n,"c",(function(){return Kn})),t.d(n,"d",(function(){return Wn})),t.d(n,"e",(function(){return Yn})),t.d(n,"f",(function(){return et})),t.d(n,"g",(function(){return kn})),t.d(n,"h",(function(){return En})),t.d(n,"i",(function(){return ot})),t.d(n,"j",(function(){return it})),t.d(n,"k",(function(){return tt})),t.d(n,"l",(function(){return rt})),t.d(n,"m",(function(){return ct})),t.d(n,"n",(function(){return at}));var a=t(31),i=t(15),o=t(3),c=t(27),s=t(0),u=t.n(s),l=t(6);function _(e){return void 0!==e.file}var d=function(e,n){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},d(e,n)};var f=function(){return f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},f.apply(this,arguments)};function p(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(n){i(n)}}function c(e){try{s(r.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}s((r=r.apply(e,n||[])).next())}))}function m(e,n){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(c){i=[6,c],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function h(e,n,t){if(t||2===arguments.length)for(var r,a=0,i=n.length;a<i;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}var b="_uMS_T",v="_uMS_V",g=function(e,n){var t;return t={},Object(c.a)(t,b,e),Object(c.a)(t,v,n),t},j=function(e,n,t){var r=Object(s.useRef)(),a=e._uMS_V(e._uMS_T),c=Object(s.useState)((function(){return[e,n,t,a,n(e._uMS_T)]})),u=Object(o.a)(c,2),l=u[0],_=u[1],d=l[4];return l[0]!==e||l[1]!==n||l[2]!==t?(d=n(e._uMS_T),_([e,n,t,a,d])):a!==l[3]&&a!==r.current&&(d=n(e._uMS_T),Object.is(d,l[4])||_([e,n,t,a,d])),Object(s.useEffect)((function(){var a=!1,o=function(){if(!a)try{var o=n(e._uMS_T),c=e._uMS_V(e._uMS_T);r.current=c,_((function(r){return r[0]!==e||r[1]!==n||r[2]!==t||Object.is(r[4],o)?r:[r[0],r[1],r[2],c,o]}))}catch(s){_((function(e){return Object(i.a)(e)}))}},c=t(e._uMS_T,o);return o(),function(){a=!0,c()}}),[e,n,t]),d},y=Object.defineProperty,O=Object.defineProperties,x=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,S=function(e,n,t){return n in e?y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t},A=function(e){return"init"in e},C=Symbol(),N=Symbol(),z=function(e,n){var t={l:n,v:0,a:new WeakMap,m:new WeakMap,p:new Map};if(e){var r,i=Object(a.a)(e);try{for(i.s();!(r=i.n()).done;){var c=Object(o.a)(r.value,2),s=c[0],u={v:c[1],r:0,d:new Map};0,t.a.set(s,u)}}catch(l){i.e(l)}finally{i.f()}}return t},T=function(e,n){return e.a.get(n)},M=function(e,n,t){var r,i,o=T(e,n),c=(r=function(e,n){for(var t in n||(n={}))k.call(n,t)&&S(e,t,n[t]);if(w){var r,i=Object(a.a)(w(n));try{for(i.s();!(r=i.n()).done;)t=r.value,E.call(n,t)&&S(e,t,n[t])}catch(o){i.e(o)}finally{i.f()}}return e}({r:0},o),i={d:t?new Map(Array.from(t).map((function(n){var t,r;return[n,null!=(r=null==(t=T(e,n))?void 0:t.r)?r:0]}))):(null==o?void 0:o.d)||new Map},O(r,x(i)));return[c,(null==o?void 0:o.d)||new Map]},I=function(e,n,t,r,a){var i,c,s=M(e,n,r),u=Object(o.a)(s,2),l=u[0],_=u[1];a&&!(null==(i=l.p)?void 0:i[C](a))||(null==(c=l.c)||c.call(l),delete l.e,delete l.p,delete l.c,delete l.i,"v"in l&&Object.is(l.v,t)||(l.v=t,++l.r),V(e,n,l,r&&_))},P=function(e,n,t,r,a){var i,c,s=M(e,n,r),u=Object(o.a)(s,2),l=u[0],_=u[1];a&&!(null==(i=l.p)?void 0:i[C](a))||(null==(c=l.c)||c.call(l),delete l.p,delete l.c,delete l.i,l.e=t,V(e,n,l,_))},U=function(e,n,t,r){var a,i,c=M(e,n,r),s=Object(o.a)(c,2),u=s[0],l=s[1];if(!(null==(a=u.p)?void 0:a[C](t))){if(null==(i=u.c)||i.call(u),function(e){return!!e[N]}(t))u.p=t,delete u.c;else{var _=function(e){var n,t=new Promise((function(t,r){n=t,e.then(t,r)}));return t[C]=function(n){return n===t||n===e},t[N]=n,t}(t);u.p=_,u.c=_[N]}V(e,n,u,l)}},R=function(e,n,t){var r=M(e,n),a=Object(o.a)(r,1)[0];t?a.w=t:delete a.w,V(e,n,a)},L=function(e,n,t){t.finally((function(){W(e,n,!0)}))},W=function e(n,t,r){if(!r){var a=T(n,t);if(a&&(a.d.forEach((function(r,a){if(a!==t){var i=T(n,a);!i||i.e||i.p||i.r!==i.i||e(n,a,!0)}})),Array.from(a.d.entries()).every((function(e){var t=Object(o.a)(e,2),r=t[0],a=t[1],i=T(n,r);return i&&!i.e&&!i.p&&i.r!==i.i&&i.r===a}))))return a}var i,c,s,u=new Set;try{var l=t.read((function(r){if(u.add(r),r!==t){var a=e(n,r);if(a.e)throw a.e;if(a.p)throw a.p;return a.v}var i=T(n,r);if(i){if(i.e)throw i.e;if(i.p)throw i.p;return i.v}if(A(r))return r.init;throw new Error("no atom init")}));l instanceof Promise?c=l.then((function(e){I(n,t,e,u,c),H(n)})).catch((function(e){if(e instanceof Promise)return L(n,t,e),e;P(n,t,e instanceof Error?e:new Error(e),u,c),H(n)})):s=l}catch(_){_ instanceof Promise?c=_:i=_ instanceof Error?_:new Error(_)}return i?P(n,t,i,u):c?U(n,t,c,u):I(n,t,s,u),T(n,t)},D=function(e,n){return!n.l.size&&(!n.d.size||1===n.d.size&&n.d.has(e))},F=function e(n,t){var r=n.m.get(t);null==r||r.d.forEach((function(r){r!==t&&(!function(e,n){var t=M(e,n),r=Object(o.a)(t,1)[0];r.i=r.r,V(e,n,r)}(n,r),e(n,r))}))},q=function e(n,t,r){var a,i=null==(a=T(n,t))?void 0:a.w;if(i)i.then((function(){e(n,t,r),H(n)}));else{var o=t.write((function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=W(n,t);if(a.e)throw a.e;if(a.p){if(r)return a.p.then((function(){return e(t,r)}));throw a.p}if("v"in a)return a.v;throw new Error("no value found")}),(function(r,a){if(r===t){if(!A(r))throw new Error("no atom init");if(a instanceof Promise){var i=a.then((function(e){I(n,r,e),F(n,r),H(n)})).catch((function(e){P(n,t,e instanceof Error?e:new Error(e)),H(n)}));U(n,t,i)}else I(n,r,a);F(n,r)}else e(n,r,a);H(n)}),r);if(o instanceof Promise){var c=o.finally((function(){R(n,t),H(n)}));R(n,t,c)}}},B=function(e,n,t){q(e,n,t),H(e)},Z=function e(n,t,r){W(n,t).d.forEach((function(r,a){if(a!==t){var i=n.m.get(a);i?i.d.add(t):e(n,a,t)}}));var a={d:new Set(r&&[r]),l:new Set,u:void 0};if(n.m.set(t,a),function(e){return!!e.write}(t)&&t.onMount){a.u=t.onMount((function(e){return B(n,t,e)}))}return a},$=function e(n,t){var r,a=null==(r=n.m.get(t))?void 0:r.u;a&&a(),n.m.delete(t);var i=T(n,t);i&&i.d.forEach((function(r,a){if(a!==t){var i=n.m.get(a);i&&(i.d.delete(t),D(a,i)&&e(n,a))}}))},V=function(e,n,t,r){var a=!e.a.has(n);e.a.set(n,t),e.l&&e.l(n,a),++e.v,e.p.has(n)||e.p.set(n,r)},H=function(e){var n=Array.from(e.p);e.p.clear(),n.forEach((function(n){var t=Object(o.a)(n,2),r=t[0],a=t[1],i=T(e,r);i&&a&&function(e,n,t,r){var a=new Set(t.d.keys());r.forEach((function(t,r){if(a.has(r))a.delete(r);else{var i=e.m.get(r);i&&(i.d.delete(n),D(r,i)&&$(e,r))}})),a.forEach((function(t){var r=e.m.get(t);r?r.d.add(n):Z(e,t,n)}))}(e,r,i,a);var c=e.m.get(r);null==c||c.l.forEach((function(e){return e()}))}))},J=function(e,n,t){var r=function(e,n){var t=e.m.get(n);return t||(t=Z(e,n)),H(e),t}(e,n),a=r.l;return a.add(t),function(){a.delete(t),function(e,n){var t=e.m.get(n);t&&D(n,t)&&$(e,n),H(e)}(e,n)}},G=function(e,n){var t,r=Object(a.a)(n);try{for(r.s();!(t=r.n()).done;){var i=Object(o.a)(t.value,2),c=i[0],s=i[1];A(c)&&(I(e,c,s),F(e,c))}}catch(u){r.e(u)}finally{r.f()}H(e)},Y=function(e){var n=z(e);return[g(n,(function(){return n.v})),function(e,t){return B(n,e,t)},function(){return H(n)},function(e){return G(n,e)}]},K=new Map,Q=function(e){return K.has(e)||K.set(e,Object(s.createContext)(Y())),K.get(e)},X=function(e){var n=e.initialValues,t=e.scope,r=e.children,a=Object(s.useRef)(null);null===a.current&&(a.current=Y(n));var i=Q(t);return Object(s.createElement)(i.Provider,{value:a.current},r)},ee=0;function ne(e,n){var t="atom".concat(++ee),r={toString:function(){return t}};return"function"===typeof e?r.read=e:(r.init=e,r.read=function(e){return e(r)},r.write=function(e,n,t){n(r,"function"===typeof t?t(e(r)):t)}),n&&(r.write=n),r}function te(e,n){var t=Object(s.useCallback)((function(n){var t=function(e,n){return W(e,n)}(n,e);if(t.e)throw t.e;if(t.p)throw t.p;if(t.w)throw t.w;if("v"in t)return t.v;throw new Error("no atom value")}),[e]),r=Object(s.useCallback)((function(n,t){return J(n,e,t)}),[e]);"scope"in e&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),n=e.scope);var a=Q(n),i=Object(s.useContext)(a),c=Object(o.a)(i,3),u=c[0],l=c[1],_=c[2],d=j(u,t,r);Object(s.useEffect)((function(){_()}));var f=Object(s.useCallback)((function(n){if(!function(e){return!!e.write}(e))throw new Error("not writable atom");l(e,n)}),[l,e]);return Object(s.useDebugValue)(d),[d,f]}var re=Object.freeze({__proto__:null,Provider:X,SECRET_INTERNAL_getStoreContext:Q,SECRET_INTERNAL_useMutableSource:j,atom:ne,useAtom:te}),ae="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r?r:"undefined"!==typeof self?self:{};function ie(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===n||null===n)&&t.path)}},t.exports),t.exports}function oe(e){if(e.__esModule)return e;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var ce=ie((function(e,n){var t="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",i="[object Boolean]",o="[object Date]",c="[object Function]",s="[object GeneratorFunction]",u="[object Map]",l="[object Number]",_="[object Object]",d="[object Promise]",f="[object RegExp]",p="[object Set]",m="[object String]",h="[object Symbol]",b="[object WeakMap]",v="[object ArrayBuffer]",g="[object DataView]",j="[object Float32Array]",y="[object Float64Array]",O="[object Int8Array]",x="[object Int16Array]",w="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",A="[object Uint32Array]",C=/\w*$/,N=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,T={};T[a]=T["[object Array]"]=T[v]=T[g]=T[i]=T[o]=T[j]=T[y]=T[O]=T[x]=T[w]=T[u]=T[l]=T[_]=T[f]=T[p]=T[m]=T[h]=T[k]=T[E]=T[S]=T[A]=!0,T["[object Error]"]=T[c]=T[b]=!1;var M="object"==typeof ae&&ae&&ae.Object===Object&&ae,I="object"==typeof self&&self&&self.Object===Object&&self,P=M||I||Function("return this")(),U=n&&!n.nodeType&&n,R=U&&e&&!e.nodeType&&e,L=R&&R.exports===U;function W(e,n){return e.set(n[0],n[1]),e}function D(e,n){return e.add(n),e}function F(e,n,t,r){var a=-1,i=e?e.length:0;for(r&&i&&(t=e[++a]);++a<i;)t=n(t,e[a],a,e);return t}function q(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(t){}return n}function B(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}function Z(e,n){return function(t){return e(n(t))}}function $(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}var V=Array.prototype,H=Function.prototype,J=Object.prototype,G=P["__core-js_shared__"],Y=function(){var e=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),K=H.toString,Q=J.hasOwnProperty,X=J.toString,ee=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=L?P.Buffer:void 0,te=P.Symbol,re=P.Uint8Array,ie=Z(Object.getPrototypeOf,Object),oe=Object.create,ce=J.propertyIsEnumerable,se=V.splice,ue=Object.getOwnPropertySymbols,le=ne?ne.isBuffer:void 0,_e=Z(Object.keys,Object),de=Re(P,"DataView"),fe=Re(P,"Map"),pe=Re(P,"Promise"),me=Re(P,"Set"),he=Re(P,"WeakMap"),be=Re(Object,"create"),ve=qe(de),ge=qe(fe),je=qe(pe),ye=qe(me),Oe=qe(he),xe=te?te.prototype:void 0,we=xe?xe.valueOf:void 0;function ke(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Ee(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Se(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Ae(e){this.__data__=new Ee(e)}function Ce(e,n){var t=Ze(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&$e(e)}(e)&&Q.call(e,"callee")&&(!ce.call(e,"callee")||X.call(e)==a)}(e)?function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}(e.length,String):[],r=t.length,i=!!r;for(var o in e)!n&&!Q.call(e,o)||i&&("length"==o||De(o,r))||t.push(o);return t}function Ne(e,n,t){var r=e[n];Q.call(e,n)&&Be(r,t)&&(void 0!==t||n in e)||(e[n]=t)}function ze(e,n){for(var t=e.length;t--;)if(Be(e[t][0],n))return t;return-1}function Te(e,n,t,r,d,b,N){var z;if(r&&(z=b?r(e,d,b,N):r(e)),void 0!==z)return z;if(!Je(e))return e;var M=Ze(e);if(M){if(z=function(e){var n=e.length,t=e.constructor(n);n&&"string"==typeof e[0]&&Q.call(e,"index")&&(t.index=e.index,t.input=e.input);return t}(e),!n)return function(e,n){var t=-1,r=e.length;n||(n=Array(r));for(;++t<r;)n[t]=e[t];return n}(e,z)}else{var I=We(e),P=I==c||I==s;if(Ve(e))return function(e,n){if(n)return e.slice();var t=new e.constructor(e.length);return e.copy(t),t}(e,n);if(I==_||I==a||P&&!b){if(q(e))return b?e:{};if(z=function(e){return"function"!=typeof e.constructor||Fe(e)?{}:(n=ie(e),Je(n)?oe(n):{});var n}(P?{}:e),!n)return function(e,n){return Pe(e,Le(e),n)}(e,function(e,n){return e&&Pe(n,Ge(n),e)}(z,e))}else{if(!T[I])return b?e:{};z=function(e,n,t,r){var a=e.constructor;switch(n){case v:return Ie(e);case i:case o:return new a(+e);case g:return function(e,n){var t=n?Ie(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,r);case j:case y:case O:case x:case w:case k:case E:case S:case A:return function(e,n){var t=n?Ie(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,r);case u:return function(e,n,t){return F(n?t(B(e),!0):B(e),W,new e.constructor)}(e,r,t);case l:case m:return new a(e);case f:return function(e){var n=new e.constructor(e.source,C.exec(e));return n.lastIndex=e.lastIndex,n}(e);case p:return function(e,n,t){return F(n?t($(e),!0):$(e),D,new e.constructor)}(e,r,t);case h:return c=e,we?Object(we.call(c)):{}}var c}(e,I,Te,n)}}N||(N=new Ae);var U=N.get(e);if(U)return U;if(N.set(e,z),!M)var R=t?function(e){return function(e,n,t){var r=n(e);return Ze(e)?r:function(e,n){for(var t=-1,r=n.length,a=e.length;++t<r;)e[a+t]=n[t];return e}(r,t(e))}(e,Ge,Le)}(e):Ge(e);return function(e,n){for(var t=-1,r=e?e.length:0;++t<r&&!1!==n(e[t],t,e););}(R||e,(function(a,i){R&&(a=e[i=a]),Ne(z,i,Te(a,n,t,r,i,e,N))})),z}function Me(e){return!(!Je(e)||(n=e,Y&&Y in n))&&(He(e)||q(e)?ee:N).test(qe(e));var n}function Ie(e){var n=new e.constructor(e.byteLength);return new re(n).set(new re(e)),n}function Pe(e,n,t,r){t||(t={});for(var a=-1,i=n.length;++a<i;){var o=n[a],c=r?r(t[o],e[o],o,t,e):void 0;Ne(t,o,void 0===c?e[o]:c)}return t}function Ue(e,n){var t=e.__data__;return function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?t["string"==typeof n?"string":"hash"]:t.map}function Re(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return Me(t)?t:void 0}ke.prototype.clear=function(){this.__data__=be?be(null):{}},ke.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ke.prototype.get=function(e){var n=this.__data__;if(be){var r=n[e];return r===t?void 0:r}return Q.call(n,e)?n[e]:void 0},ke.prototype.has=function(e){var n=this.__data__;return be?void 0!==n[e]:Q.call(n,e)},ke.prototype.set=function(e,n){return this.__data__[e]=be&&void 0===n?t:n,this},Ee.prototype.clear=function(){this.__data__=[]},Ee.prototype.delete=function(e){var n=this.__data__,t=ze(n,e);return!(t<0)&&(t==n.length-1?n.pop():se.call(n,t,1),!0)},Ee.prototype.get=function(e){var n=this.__data__,t=ze(n,e);return t<0?void 0:n[t][1]},Ee.prototype.has=function(e){return ze(this.__data__,e)>-1},Ee.prototype.set=function(e,n){var t=this.__data__,r=ze(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},Se.prototype.clear=function(){this.__data__={hash:new ke,map:new(fe||Ee),string:new ke}},Se.prototype.delete=function(e){return Ue(this,e).delete(e)},Se.prototype.get=function(e){return Ue(this,e).get(e)},Se.prototype.has=function(e){return Ue(this,e).has(e)},Se.prototype.set=function(e,n){return Ue(this,e).set(e,n),this},Ae.prototype.clear=function(){this.__data__=new Ee},Ae.prototype.delete=function(e){return this.__data__.delete(e)},Ae.prototype.get=function(e){return this.__data__.get(e)},Ae.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Ee){var r=t.__data__;if(!fe||r.length<199)return r.push([e,n]),this;t=this.__data__=new Se(r)}return t.set(e,n),this};var Le=ue?Z(ue,Object):function(){return[]},We=function(e){return X.call(e)};function De(e,n){return!!(n=null==n?r:n)&&("number"==typeof e||z.test(e))&&e>-1&&e%1==0&&e<n}function Fe(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||J)}function qe(e){if(null!=e){try{return K.call(e)}catch(n){}try{return e+""}catch(n){}}return""}function Be(e,n){return e===n||e!==e&&n!==n}(de&&We(new de(new ArrayBuffer(1)))!=g||fe&&We(new fe)!=u||pe&&We(pe.resolve())!=d||me&&We(new me)!=p||he&&We(new he)!=b)&&(We=function(e){var n=X.call(e),t=n==_?e.constructor:void 0,r=t?qe(t):void 0;if(r)switch(r){case ve:return g;case ge:return u;case je:return d;case ye:return p;case Oe:return b}return n});var Ze=Array.isArray;function $e(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!He(e)}var Ve=le||function(){return!1};function He(e){var n=Je(e)?X.call(e):"";return n==c||n==s}function Je(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function Ge(e){return $e(e)?Ce(e):function(e){if(!Fe(e))return _e(e);var n=[];for(var t in Object(e))Q.call(e,t)&&"constructor"!=t&&n.push(t);return n}(e)}e.exports=function(e){return Te(e,!0,!0)}})),se="__lodash_hash_undefined__",ue="[object Function]",le="[object GeneratorFunction]",_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/,fe=/^\./,pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,me=/\\(\\)?/g,he=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,ve="object"==typeof ae&&ae&&ae.Object===Object&&ae,ge="object"==typeof self&&self&&self.Object===Object&&self,je=ve||ge||Function("return this")();var ye=Array.prototype,Oe=Function.prototype,xe=Object.prototype,we=je["__core-js_shared__"],ke=function(){var e=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ee=Oe.toString,Se=xe.hasOwnProperty,Ae=xe.toString,Ce=RegExp("^"+Ee.call(Se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=je.Symbol,ze=ye.splice,Te=Ze(je,"Map"),Me=Ze(Object,"create"),Ie=Ne?Ne.prototype:void 0,Pe=Ie?Ie.toString:void 0;function Ue(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Re(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Le(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function We(e,n,t){var r=e[n];Se.call(e,n)&&Ge(r,t)&&(void 0!==t||n in e)||(e[n]=t)}function De(e,n){for(var t=e.length;t--;)if(Ge(e[t][0],n))return t;return-1}function Fe(e){if(!Ke(e)||(n=e,ke&&ke in n))return!1;var n,t=function(e){var n=Ke(e)?Ae.call(e):"";return n==ue||n==le}(e)||function(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(t){}return n}(e)?Ce:he;return t.test(function(e){if(null!=e){try{return Ee.call(e)}catch(n){}try{return e+""}catch(n){}}return""}(e))}function qe(e,n,t,r){if(!Ke(e))return e;n=function(e,n){if(Ye(e))return!1;var t=typeof e;if("number"==t||"symbol"==t||"boolean"==t||null==e||Qe(e))return!0;return de.test(e)||!_e.test(e)||null!=n&&e in Object(n)}(n,e)?[n]:function(e){return Ye(e)?e:Ve(e)}(n);for(var a=-1,i=n.length,o=i-1,c=e;null!=c&&++a<i;){var s=He(n[a]),u=t;if(a!=o){var l=c[s];void 0===(u=r?r(l,s,c):void 0)&&(u=Ke(l)?l:$e(n[a+1])?[]:{})}We(c,s,u),c=c[s]}return e}function Be(e,n){var t=e.__data__;return function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?t["string"==typeof n?"string":"hash"]:t.map}function Ze(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return Fe(t)?t:void 0}function $e(e,n){return!!(n=null==n?9007199254740991:n)&&("number"==typeof e||be.test(e))&&e>-1&&e%1==0&&e<n}Ue.prototype.clear=function(){this.__data__=Me?Me(null):{}},Ue.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ue.prototype.get=function(e){var n=this.__data__;if(Me){var t=n[e];return t===se?void 0:t}return Se.call(n,e)?n[e]:void 0},Ue.prototype.has=function(e){var n=this.__data__;return Me?void 0!==n[e]:Se.call(n,e)},Ue.prototype.set=function(e,n){return this.__data__[e]=Me&&void 0===n?se:n,this},Re.prototype.clear=function(){this.__data__=[]},Re.prototype.delete=function(e){var n=this.__data__,t=De(n,e);return!(t<0)&&(t==n.length-1?n.pop():ze.call(n,t,1),!0)},Re.prototype.get=function(e){var n=this.__data__,t=De(n,e);return t<0?void 0:n[t][1]},Re.prototype.has=function(e){return De(this.__data__,e)>-1},Re.prototype.set=function(e,n){var t=this.__data__,r=De(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},Le.prototype.clear=function(){this.__data__={hash:new Ue,map:new(Te||Re),string:new Ue}},Le.prototype.delete=function(e){return Be(this,e).delete(e)},Le.prototype.get=function(e){return Be(this,e).get(e)},Le.prototype.has=function(e){return Be(this,e).has(e)},Le.prototype.set=function(e,n){return Be(this,e).set(e,n),this};var Ve=Je((function(e){var n;e=null==(n=e)?"":function(e){if("string"==typeof e)return e;if(Qe(e))return Pe?Pe.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}(n);var t=[];return fe.test(e)&&t.push(""),e.replace(pe,(function(e,n,r,a){t.push(r?a.replace(me,"$1"):n||e)})),t}));function He(e){if("string"==typeof e||Qe(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Je(e,n){if("function"!=typeof e||n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function t(){var r=arguments,a=n?n.apply(this,r):r[0],i=t.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return t.cache=i.set(a,o),o};return t.cache=new(Je.Cache||Le),t}function Ge(e,n){return e===n||e!==e&&n!==n}Je.Cache=Le;var Ye=Array.isArray;function Ke(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function Qe(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Ae.call(e)}var Xe=function(e,n,t){return null==e?e:qe(e,n,t)},en=ne("light"),nn=ne(""),tn=ne([]),rn=ne([]),an=ne([]),on=ne({}),cn=ne({}),sn=ne({}),un=ne(10),ln=ne({function:function(){return null}}),_n=ne({function:function(){return null}}),dn=ne((function(e){return e(on)&&e(on)[e(nn)]||[]}),(function(e,n,t){var r;return n(on,Object.assign({},e(on),((r={})[e(nn)]=t,r)))})),fn=ne((function(e){return e(cn)[e(nn)]||!1}),(function(e,n,t){var r;return n(cn,Object.assign({},e(cn),((r={})[e(nn)]=t,r)))})),pn=ne((function(e){return e(sn)[e(nn)]||{}}),(function(e,n,t){var r;return n(sn,Object.assign({},e(sn),((r={})[e(nn)]=t,r)))}));function mn(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}mn("/*\n* Global color variables for light and dark theme\n* Warning! When hexToRGB is used on a color, the variable can only be used with rgba color function\n* inside of the actual CSS. To goal of this is to introduce alpha channels on some of the colors\n*/\n:root {\n  --chat--light__background--1: #f0f3f7;\n  --chat--light__background--2: #ffffff;\n  --chat--light__background--3: #eaeef3;\n  --chat--light__background--4: #01bd4c;\n  --chat--light__background--5-rgb: 239, 58, 67;\n  --chat--light__color--1: #585858;\n  --chat--light__color--2: #999999;\n  --chat--light__color--2-rgb: 153, 153, 153;\n  --chat--light__border--1: #ced6e0;\n  --chat--light__border--2: #bcc6d1;\n  --chat--light__hover--1: #de2440;\n  --chat--light__hover--2: #e4e9f0;\n  --chat--light__hover--3: #e9eef4;\n  --chat--light__hover--4: #e1e8f0;\n  --chat--dark__background--1: #1c1c28;\n  --chat--dark__background--2: #2a2a39;\n  --chat--dark__background--2-rgb: 42, 42, 57;\n  --chat--dark__background--4: #01bd4c;\n  --chat--dark__background--5: 239, 58, 67;\n  --chat--dark__color--1: rgba(228, 228, 235, 0.8);\n  --chat--dark__color--2: #999999;\n  --chat--dark__border--1: #28293d;\n  --chat--dark__hover--1: #de2440;\n  --chat--dark__hover--2: #232333;\n  --chat--dark__hover--4: #555770;\n  --chat--dark__hover--4-rgb: 85, 87, 112;\n}");var hn,bn,vn,gn,jn,yn,On,xn=function(e){function n(n){var t=e.call(this,n)||this;return t.state={error:null},t}return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}d(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),n.getDerivedStateFromError=function(e){return{error:e}},n.prototype.componentDidCatch=function(e){this.props.onError&&this.props.onError(e)},n.prototype.render=function(){return u.a.createElement(X,null,u.a.createElement(wn,f({},this.props)))},n.defaultProps={channels:[],channelGroups:[],theme:"light",enablePresence:!0,typingIndicatorTimeout:10,users:[],retryOptions:{maxRetries:1,timeout:0,exponentialFactor:1},onError:function(){return null}},n}(s.Component),wn=function(e){var n=Object(l.b)(),t=te(on)[1],r=te(en)[1],a=te(_n)[1],i=te(ln)[1],o=te(sn)[1],c=te(un)[1],_=te(an)[1],d=te(nn),b=d[0],v=d[1],g=te(tn),j=g[0],y=g[1],O=te(rn),x=O[0],w=O[1],k=Object(s.useCallback)((function(n){return p(void 0,void 0,void 0,(function(){var t,r,a,i,o,c,s;return m(this,(function(u){switch(u.label){case 0:t=e.retryOptions,r=t.maxRetries,a=t.timeout,i=t.exponentialFactor,o=function(e){var t,o;return m(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,4]),t={},[4,n()];case 1:return[2,(t.value=c.sent(),t)];case 2:if(o=c.sent(),r===e+1)throw o;return[4,new Promise((function(n){return setTimeout(n,a*Math.pow(i,e))}))];case 3:return c.sent(),[3,4];case 4:return[2]}}))},c=0,u.label=1;case 1:return c<r?[5,o(c)]:[3,4];case 2:if("object"===typeof(s=u.sent()))return[2,s.value];u.label=3;case 3:return c++,[3,1];case 4:return[2]}}))}))}),[e.retryOptions]);Object(s.useEffect)((function(){n._config._addPnsdkSuffix("chat-components","RCC/0.7.0")}),[]),Object(s.useEffect)((function(){c(e.typingIndicatorTimeout)}),[]),Object(s.useEffect)((function(){_(e.users)}),[e.users]),Object(s.useEffect)((function(){r(e.theme)}),[e.theme]),Object(s.useEffect)((function(){v(e.currentChannel)}),[e.currentChannel]),Object(s.useEffect)((function(){y(e.channels)}),[e.channels]),Object(s.useEffect)((function(){w(e.channelGroups)}),[e.channelGroups]),Object(s.useEffect)((function(){a({function:function(n){return e.onError(n)}})}),[e.onError]),Object(s.useEffect)((function(){i({function:function(e){return k(e)}})}),[k]),Object(s.useEffect)((function(){if(n)return E(),window.addEventListener("beforeunload",(function(){n.stop()})),function(){n.stop()}}),[n]),Object(s.useEffect)((function(){b&&(j.includes(b)||e.channels.length||e.channelGroups.length||y(h(h([],j,!0),[b],!1)))}),[b]),Object(s.useEffect)((function(){(j.length||x.length)&&S()}),[j,x]);var E=function(){try{n.addListener({message:function(e){return A(e)},messageAction:function(e){return T(e)},presence:function(e){return N(e)},objects:function(e){return z(e)},signal:function(e){return C(e)},file:function(e){return M(e)},status:function(e){return I(e)}})}catch(t){e.onError(t)}},S=function(){try{var t=n.getSubscribedChannels(),r=j.filter((function(e){return!t.includes(e)})),a=n.getSubscribedChannelGroups(),i=x.filter((function(e){return!a.includes(e)}));(r.length||i.length)&&n.subscribe({channels:r,channelGroups:i,withPresence:e.enablePresence})}catch(o){e.onError(o)}},A=function(n){e.onMessage&&e.onMessage(n);try{t((function(e){var t=ce(e)||{};return t[n.channel]=t[n.channel]||[],t[n.channel].push(n),t}))}catch(r){e.onError(r)}},C=function(n){e.onSignal&&e.onSignal(n);try{["typing_on","typing_off"].includes(n.message.type)&&o((function(e){var t=ce(e),r="typing_on"===n.message.type?n.timetoken:null;return Xe(t,[n.channel,n.publisher],r),t}))}catch(t){e.onError(t)}},N=function(n){e.onPresence&&e.onPresence(n)},z=function(n){"membership"===n.message.type&&e.onMembership&&e.onMembership(n),"channel"===n.message.type&&e.onChannel&&e.onChannel(n),"uuid"===n.message.type&&e.onUser&&e.onUser(n)},T=function(n){e.onMessageAction&&e.onMessageAction(n);try{t((function(e){var t,r;if(e&&e[n.channel]){var a=n.channel,i=n.event,o=n.data,c=o.type,s=o.value,u=o.actionTimetoken,l=o.messageTimetoken,_=o.uuid,d=ce(e),f=d[a].find((function(e){return e.timetoken===l})),p=(null===(r=null===(t=null===f||void 0===f?void 0:f.actions)||void 0===t?void 0:t[c])||void 0===r?void 0:r[s])||[];if(f&&"added"===i){var m=h(h([],p,!0),[{uuid:_,actionTimetoken:u}],!1);Xe(f,["actions",c,s],m)}if(f&&"removed"===i)(m=p.filter((function(e){return e.actionTimetoken!==u}))).length?Xe(f,["actions",c,s],m):delete f.actions[c][s];return d}}))}catch(r){e.onError(r)}},M=function(n){e.onFile&&e.onFile(n);try{t((function(e){var t=n.file,r=n.message,a=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(n,["file","message"]),i=f(f({},a),{message:{file:t,message:r},messageType:4}),o=ce(e)||{};return o[i.channel]=o[i.channel]||[],o[i.channel].push(i),o}))}catch(r){e.onError(r)}},I=function(n){e.onStatus&&e.onStatus(n)};return u.a.createElement(u.a.Fragment,null,e.children)},kn=function(e){if(!e||!e.length)return"";var n=e.split(" ");return(1==n.length?n[0].substring(0,2):n[0][0]+n[1][0]).toUpperCase()},En=function(e){if(e&&e.length){var n=["#80deea","#9fa7df","#aed581","#ce93d8","#ef9a9a","#ffab91","#ffe082"];return n[e.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,n){return e+n}))%n.length]}},Sn=function(e){var n=Object(s.useRef)(),t=Object(s.useRef)();return Object(s.useEffect)((function(){n.current=e})),Object(s.useEffect)((function(){var e=function(e){t.current&&n.current&&!t.current.contains(e.target)&&n.current(e)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[]),t};function An(){return An=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},An.apply(this,arguments)}function Cn(e){return s.createElement("svg",An({xmlns:"http://www.w3.org/2000/svg",overflow:"visible",preserveAspectRatio:"none",viewBox:"0 0 24 24",width:20,height:20},e),hn||(hn=s.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z",fill:"currentColor",vectorEffect:"non-scaling-stroke"})))}function Nn(){return Nn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Nn.apply(this,arguments)}function zn(e){return s.createElement("svg",Nn({xmlns:"http://www.w3.org/2000/svg",height:20,viewBox:"0 0 24 24",width:20,fill:"currentColor"},e),bn||(bn=s.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),vn||(vn=s.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"})))}function Tn(){return Tn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tn.apply(this,arguments)}function Mn(e){return s.createElement("svg",Tn({xmlns:"http://www.w3.org/2000/svg",overflow:"visible",preserveAspectRatio:"none",viewBox:"0 0 24 24",width:20,height:20},e),gn||(gn=s.createElement("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z",fill:"currentColor",vectorEffect:"non-scaling-stroke"})))}function In(){return In=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},In.apply(this,arguments)}function Pn(e){return s.createElement("svg",In({xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),jn||(jn=s.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.404 12.596a6.5 6.5 0 119.192-9.192 6.5 6.5 0 01-9.192 9.192zM2.344 2.343a8 8 0 1011.313 11.314A8 8 0 002.343 2.343zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"})))}function Un(){return Un=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Un.apply(this,arguments)}function Rn(e){return s.createElement("svg",Un({xmlns:"http://www.w3.org/2000/svg",style:{margin:"auto",background:"0 0"},width:20,height:20,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",display:"block"},e),yn||(yn=s.createElement("circle",{cx:50,cy:50,fill:"none",stroke:"currentColor",strokeWidth:15,r:43,strokeDasharray:"117.80972450961724 41.269908169872416"},s.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"0.641025641025641s",values:"0 50 50;360 50 50",keyTimes:"0;1"}))))}function Ln(){return Ln=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ln.apply(this,arguments)}mn("/* ************************\n** Variables\n** ********************* */\n:root {\n  --msg-input__background: var(--chat--light__background--1);\n  --msg-input__padding: 10px 18px;\n  --msg-input__emoji-picker__bottom: 14px;\n  --msg-input__emoji-picker__left: 10px;\n  --msg-input__icon__color: var(--chat--light__color--2);\n  --msg-input__icon__margin: 0 18px 0 0;\n  --msg-input__icon__fontSize: 13px;\n  --msg-input__send__background: transparent;\n  --msg-input__send__border: none;\n  --msg-input__send__borderRadius: 5px;\n  --msg-input__send__color: var(--chat--light__color--2);\n  --msg-input__send--active__color: var(--chat--light__hover--1);\n  --msg-input__send__fontFamily: inherit;\n  --msg-input__send__fontSize: 13px;\n  --msg-input__send__fontWeight: bold;\n  --msg-input__send__margin: 0 0 0 18px;\n  --msg-input__send__minWidth: 0;\n  --msg-input__send__padding: 0;\n  --msg-input--disabled__placeholder__color: rgba(var(--chat--light__color--2-rgb), 0.5);\n  --msg-input__placeholder__color: var(--chat--light__color--2);\n  --msg-input__textarea--focus__border: 1px solid transparent;\n  --msg-input__textarea--focus__outline: none;\n  --msg-input__textarea__background: var(--chat--light__hover--2);\n  --msg-input--disabled__textarea__background: var(--chat--light__background--3);\n  --msg-input__textarea__border: 1px solid transparent;\n  --msg-input--disabled__textarea__border: 1px solid transparent;\n  --msg-input__textarea__borderRadius: 20px;\n  --msg-input__textarea__boxShadow: none;\n  --msg-input__textarea__color: var(--chat--light__color--1);\n  --msg-input__textarea__fontFamily: inherit;\n  --msg-input__textarea__fontSize: 13px;\n  --msg-input__textarea__height: 32px;\n  --msg-input__textarea__lineHeight: 18px;\n  --msg-input__textarea__outline: none;\n  --msg-input__textarea__padding: 6px 14px 8px;\n  --msg-input__textarea__resize: none;\n  --msg-input__textarea__width: 100%;\n  --msg-input__textarea__overflow: hidden;\n}\n\n/* ************************\n** Styles\n** ********************* */\n.pn-msg-input {\n  background: var(--msg-input__background);\n  padding: var(--msg-input__padding);\n}\n.pn-msg-input__wrapper {\n  align-items: center;\n  display: flex;\n  position: relative;\n}\n.pn-msg-input__textarea {\n  background: var(--msg-input__textarea__background);\n  border-radius: var(--msg-input__textarea__borderRadius);\n  border: var(--msg-input__textarea__border);\n  box-shadow: var(--msg-input__textarea__boxShadow);\n  box-sizing: border-box;\n  color: var(--msg-input__textarea__color);\n  font-family: var(--msg-input__textarea__fontFamily);\n  font-size: var(--msg-input__textarea__fontSize);\n  height: var(--msg-input__textarea__height);\n  line-height: var(--msg-input__textarea__lineHeight);\n  outline: var(--msg-input__textarea__outline);\n  padding: var(--msg-input__textarea__padding);\n  resize: var(--msg-input__textarea__resize);\n  width: var(--msg-input__textarea__width);\n  overflow: var(--msg-input__textarea__overflow);\n}\n.pn-msg-input__textarea:focus-within {\n  outline: var(--msg-input__textarea--focus__outline);\n  border: var(--msg-input__textarea--focus__border);\n}\n.pn-msg-input__textarea::placeholder {\n  color: var(--msg-input__placeholder__color);\n}\n.pn-msg-input__send {\n  background: var(--msg-input__send__background);\n  border-radius: var(--msg-input__send__borderRadius);\n  border: var(--msg-input__send__border);\n  color: var(--msg-input__send__color);\n  cursor: pointer;\n  flex-shrink: 0;\n  font-family: var(--msg-input__send__fontFamily);\n  font-size: var(--msg-input__send__fontSize);\n  font-weight: var(--msg-input__send__fontWeight);\n  margin: var(--msg-input__send__margin);\n  min-width: var(--msg-input__send__minWidth);\n  outline: none;\n  padding: var(--msg-input__send__padding);\n  white-space: nowrap;\n}\n.pn-msg-input__send--active {\n  color: var(--msg-input__send--active__color);\n}\n.pn-msg-input__emoji-picker {\n  bottom: var(--msg-input__emoji-picker__bottom);\n  left: var(--msg-input__emoji-picker__left);\n  position: absolute;\n}\n.pn-msg-input__icons {\n  align-items: center;\n  display: flex;\n}\n.pn-msg-input__icons > * {\n  cursor: pointer;\n  color: var(--msg-input__icon__color);\n  font-size: var(--msg-input__icon__fontSize);\n  margin: var(--msg-input__icon__margin);\n}\n.pn-msg-input__fileLabel {\n  cursor: pointer;\n}\n.pn-msg-input__fileInput {\n  display: none;\n}\n\n.pn-msg-input--disabled .pn-msg-input__textarea {\n  background: var(--msg-input--disabled__textarea__background);\n  border: var(--msg-input--disabled__textarea__border);\n  cursor: not-allowed;\n}\n.pn-msg-input--disabled .pn-msg-input__textarea::placeholder {\n  color: var(--msg-input--disabled__placeholder__color);\n}\n\n/* ************************\n** Themes\n** ********************* */\n.pn-msg-input--dark,\n.pn-msg-input--event-dark,\n.pn-msg-input--support-dark {\n  --msg-input__background: var(--chat--dark__background--1);\n  --msg-input__icon__color: var(--chat--dark__color--2);\n  --msg-input__send__color: var(--chat--dark__color--2);\n  --msg-input__send--active__color: var(--chat--dark__hover--1);\n  --msg-input--disabled__placeholder__color: rgba(var(--chat--dark__hover--4-rgb), 0.5);\n  --msg-input__placeholder__color: var(--chat--dark__hover--4);\n  --msg-input__textarea__background: var(--chat--dark__background--2);\n  --msg-input--disabled__textarea__background: rgba(var(--chat--dark__background--2-rgb), 0.5);\n  --msg-input__textarea__color: var(--chat--dark__color--1);\n}");var Wn=function(e){var n=Object(l.b)(),t=Object(s.useState)(e.draftMessage||""),r=t[0],a=t[1],i=Object(s.useState)(null),o=i[0],c=i[1],_=Object(s.useState)(!1),d=_[0],h=_[1],b=Object(s.useState)(!1),v=b[0],g=b[1],j=Object(s.useState)(),y=j[0],O=j[1],x=Object(s.useState)(!1),w=x[0],k=x[1],E=te(an)[0],S=te(en)[0],A=te(nn)[0],C=te(_n)[0].function,N=te(un)[0],z=Object(s.useRef)(null),T=Object(s.useRef)(null),M=Sn((function(){event.target.closest(".pn-msg-input__emoji-toggle")||h(!1)})),I=function(){var e=z.current;e&&setTimeout((function(){e.style.cssText="height: auto;",e.style.cssText="height: "+e.scrollHeight+"px;"}),0)},P=function(){return p(void 0,void 0,void 0,(function(){var t,a;return m(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,6,7]),o||r?(k(!0),o?[4,n.sendFile({channel:A,file:o})]:[3,2]):[2];case 1:return i.sent(),e.onSend&&e.onSend(o),[3,4];case 2:return r?(t=f({type:"text",text:r},e.senderInfo&&{sender:E.find((function(e){return e.id===n.getUUID()}))}),[4,n.publish({channel:A,message:t})]):[3,4];case 3:i.sent(),e.onSend&&e.onSend(t),i.label=4;case 4:return e.typingIndicator&&U(),R(),[3,7];case 5:return a=i.sent(),C(a),[3,7];case 6:return k(!1),[7];case 7:return[2]}}))}))},U=function(){return p(void 0,void 0,void 0,(function(){var e;return m(this,(function(t){if(!v)return[2];try{g(!1),e={message:{type:"typing_off"},channel:A},n.signal(e)}catch(r){C(r)}return[2]}))}))},R=function(){c(null),a(""),I(),T.current.value=null},L=function(e){try{if(!("native"in e))return;a(r+e.native),h(!1)}catch(n){C(n)}},W=function(t){try{var r=t.target.value;e.typingIndicator&&r.length&&p(void 0,void 0,void 0,(function(){var e;return m(this,(function(t){if(v)return[2];try{g(!0),e={message:{type:"typing_on"},channel:A},n.signal(e)}catch(r){C(r)}return[2]}))})),e.typingIndicator&&!r.length&&U(),e.onChange&&e.onChange(r),I(),a(r)}catch(i){C(i)}},D=function(e){try{var n=e.target.files[0];c(n),a(n.name)}catch(t){C(t)}};Object(s.useEffect)((function(){u.a.isValidElement(e.emojiPicker)&&O(u.a.cloneElement(e.emojiPicker,{onSelect:L}))}),[e.emojiPicker]),Object(s.useEffect)((function(){var e=null;return v&&(e=setTimeout((function(){g(!1)}),1e3*(N-1))),function(){return clearTimeout(e)}}),[v]);return u.a.createElement("div",{className:"pn-msg-input pn-msg-input--"+S+" "+(e.disabled?"pn-msg-input--disabled":"")},u.a.createElement("div",{className:"pn-msg-input__wrapper"},u.a.createElement("div",{className:"pn-msg-input__icons"},u.a.createElement("div",{className:"pn-msg-input__emoji-toggle"},!e.disabled&&e.emojiPicker&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{onClick:function(){return h(!0)},title:"Add an emoji"},u.a.createElement(Cn,null)),d&&u.a.createElement("div",{className:"pn-msg-input__emoji-picker",ref:M},y))),!e.disabled&&e.fileUpload&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"file-upload",className:"pn-msg-input__fileLabel",title:"Add a file"},"image"===e.fileUpload?u.a.createElement(Mn,null):u.a.createElement(zn,null)),u.a.createElement("input",{accept:"image"===e.fileUpload?"image/*":"*",className:"pn-msg-input__fileInput","data-testid":"file-upload",id:"file-upload",onChange:D,ref:T,type:"file"})),o&&u.a.createElement("div",{title:"Remove the file",onClick:R},u.a.createElement(Pn,null))),e.extraActionsRenderer&&e.extraActionsRenderer()),u.a.createElement("textarea",{className:"pn-msg-input__textarea","data-testid":"message-input",disabled:e.disabled||!!o,onChange:function(e){return W(e)},onKeyPress:function(e){return function(n){try{"Enter"!==n.key||n.shiftKey||(n.preventDefault(),P())}catch(e){C(e)}}(e)},placeholder:e.placeholder,ref:z,rows:1,value:r}),!e.hideSendButton&&!e.disabled&&u.a.createElement("button",{className:"pn-msg-input__send "+(r.length&&"pn-msg-input__send--active"),disabled:w||e.disabled,onClick:function(){return P()},title:"Send"},w?u.a.createElement(Rn,null):e.sendButton)))};Wn.defaultProps={disabled:!1,fileUpload:void 0,hideSendButton:!1,placeholder:"Send message",sendButton:u.a.createElement((function(e){return s.createElement("svg",Ln({xmlns:"http://www.w3.org/2000/svg",overflow:"visible",preserveAspectRatio:"none",viewBox:"0 0 24 24",width:20,height:20},e),On||(On=s.createElement("path",{fill:"currentColor",vectorEffect:"non-scaling-stroke",d:"M2 21l21-9L2 3v7l15 2-15 2z"})))}),null),senderInfo:!1,typingIndicator:!1};var Dn,Fn,qn,Bn,Zn=oe(re),$n=ie((function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var t=Symbol();function r(e,n){var t=Zn.SECRET_INTERNAL_getStoreContext(n),r=u.a.useContext(t)[1];return u.a.useCallback((function(n){return r(e,n)}),[r,e])}function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function o(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(e){if("string"===typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c=function(e,n){for(;;){var t=n,r=t[0],a=t.slice(1),i=e.get(r);if(!i)return;if(!a.length)return i[1];e=i[0],n=a}},s=function(e,n,t){for(;;){var r=n,a=r[0],i=r.slice(1),o=e.get(a);if(o||(o=[new WeakMap],e.set(a,o)),!i.length)return void(o[1]=t);e=o[0],n=i}},l=new WeakMap;var _=new WeakMap,d=function e(n){if("object"===typeof n&&null!==n){Object.freeze(n);for(var t,r=o(Object.getOwnPropertyNames(n));!(t=r()).done;){e(n[t.value])}return n}};var f=new WeakMap,p=function(e){return!!e.write};var m=new WeakMap;var h=function(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((function(n){return e[n]}))},b=function(e,n){return Array.isArray(e)?n:Object.getOwnPropertyNames(e).reduce((function(e,t,r){var i;return a({},e,((i={})[t]=n[r],i))}),{})},v=function(e){return{getItem:function(n){var t=e().getItem(n);return t instanceof Promise?t.then((function(e){return JSON.parse(e||"")})):JSON.parse(t||"")},setItem:function(n,t){e().setItem(n,JSON.stringify(t))}}},g=v((function(){return localStorage}));function j(e,n,t){void 0===t&&(t=g);var r=function(){try{var r=t.getItem(e);return r instanceof Promise?r.catch((function(){return n})):r}catch(a){return n}},a=Zn.atom(t.delayInit?n:r());a.onMount=function(n){var a;if(t.subscribe&&(a=t.subscribe(e,n)),t.delayInit){var i=r();i instanceof Promise?i.then(n):n(i)}return a};var i=Zn.atom((function(e){return e(a)}),(function(n,r,i){var o="function"===typeof i?i(n(a)):i;r(a,o),t.setItem(e,o)}));return i}var y=new WeakMap;n.RESET=t,n.atomFamily=function(e,n){var t=null,r=new Map,a=function(a){var i;if(void 0===n)i=r.get(a);else for(var c,s=o(r);!(c=s()).done;){var u=c.value,l=u[0],_=u[1];if(n(l,a)){i=_;break}}if(void 0!==i){if(null==t||!t(i[1],a))return i[0];r.delete(a)}var d=e(a);return r.set(a,[d,Date.now()]),d};return a.remove=function(e){if(void 0===n)r.delete(e);else for(var t,a=o(r);!(t=a()).done;){var i=t.value[0];if(n(i,e)){r.delete(i);break}}},a.setShouldRemove=function(e){if(t=e)for(var n,a=o(r);!(n=a()).done;){var i=n.value,c=i[0],s=i[1];t(s[1],c)&&r.delete(c)}},a},n.atomWithDefault=function(e){var n=Symbol(),r=Zn.atom(n),a=Zn.atom((function(t){var a=t(r);return a!==n?a:e(t)}),(function(e,i,o){i(r,o===t?n:"function"===typeof o?o(e(a)):o)}));return a},n.atomWithHash=function(e,n,t,r){void 0===t&&(t=JSON.stringify),void 0===r&&(r=JSON.parse);var a={getItem:function(e){var n=new URLSearchParams(location.hash.slice(1)).get(e);if(null===n)throw new Error("no value stored");return r(n)},setItem:function(e,n){var r=new URLSearchParams(location.hash.slice(1));r.set(e,t(n)),location.hash=r.toString()},delayInit:!0,subscribe:function(e,n){var t=function(){var t=new URLSearchParams(location.hash.slice(1)).get(e);null!==t&&n(r(t))};return window.addEventListener("hashchange",t),function(){window.removeEventListener("hashchange",t)}}};return j(e,n,a)},n.atomWithObservable=function(e){var n=Zn.atom((function(n){var t=null,r=e(n),a=r[Symbol.observable];a&&(r=a());var i=Zn.atom(new Promise((function(e,n){t=function(t,r){r?n(r):e(t)}}))),o=function(){throw new Error("setting data without mount")},c=function(e){t?(t(e),t=null,u&&!o&&(u.unsubscribe(),u=null)):o(e)},s=function(e){t?(t(null,e),t=null,u&&!o&&(u.unsubscribe(),u=null)):o(Promise.reject(e))},u=null;return u=r.subscribe(c,s),t||(u.unsubscribe(),u=null),i.onMount=function(e){return o=e,u||(u=r.subscribe(c,s)),function(){var e;return null==(e=u)?void 0:e.unsubscribe()}},{dataAtom:i,observable:r}}));return Zn.atom((function(e){var t=e(n);return e(t.dataAtom)}),(function(e,t,r){var a=e(n).observable;if(!("next"in a))throw new Error("observable is not subject");a.next(r)}))},n.atomWithReducer=function(e,n){var t=Zn.atom(e,(function(e,r,a){return r(t,n(e(t),a))}));return t},n.atomWithReset=function(e){var n=Zn.atom(e,(function(r,a,i){a(n,i===t?e:"function"===typeof i?i(r(n)):i)}));return n},n.atomWithStorage=j,n.createJSONStorage=v,n.freezeAtom=function(e){var n=[e],t=c(_,n);if(t)return t;var r=Zn.atom((function(n){return d(n(e))}),(function(n,t,r){return t(e,r)}));return s(_,n,r),r},n.freezeAtomCreator=function(e){return function(){var n=e.apply(void 0,arguments),t=n.read;return n.read=function(e){return d(t(e))},n}},n.selectAtom=function(e,n,t){void 0===t&&(t=Object.is);var r=[e,n,t],a=c(l,r);if(a)return a;var i=Zn.atom((function(){return{}})),o=Zn.atom((function(r){var a=n(r(e)),o=r(i);return"prev"in o&&t(o.prev,a)?o.prev:(o.prev=a,a)}));return s(l,r,o),o},n.splitAtom=function(e,n){var t=n?[e,n]:[e],r=c(f,t);if(r)return r;var a=Zn.atom((function(){return{}})),i=function(t){var r=t(a),i=[],o=[];return t(e).forEach((function(t,a){var c,s,u,l=n?n(t):a;o[a]=l;var _=null==(c=r.atomList)?void 0:c[null!=(s=null==(u=r.keyList)?void 0:u.indexOf(l))?s:-1];if(_)i[a]=_;else{var d=function(n){var t,a,i=null!=(t=null==(a=r.keyList)?void 0:a.indexOf(l))?t:-1;return n(e)[i]},f=p(e)?Zn.atom(d,(function(n,t,a){var i,o,c=null!=(i=null==(o=r.keyList)?void 0:o.indexOf(l))?i:-1;if(-1===c)throw new Error("splitAtom: array index not found");var s=n(e),u="function"===typeof a?a(s[c]):a;t(e,[].concat(s.slice(0,c),[u],s.slice(c+1)))})):Zn.atom(d);i[a]=f}})),r.keyList=o,r.atomList&&r.atomList.length===i.length&&r.atomList.every((function(e,n){return e===i[n]}))?r.atomList:r.atomList=i},o=p(e)?Zn.atom(i,(function(n,t,r){var a=n(o).indexOf(r);if(a>=0){var i=n(e);t(e,[].concat(i.slice(0,a),i.slice(a+1)))}})):Zn.atom(i);return s(f,t,o),o},n.useAtomCallback=function(e,n){var t=u.a.useMemo((function(){return Zn.atom(null,(function(n,t,r){var a=r[0],i=r[1],o=r[2];try{i(e(n,t,a))}catch(c){o(c)}}))}),[e]),a=r(t,n);return u.a.useCallback((function(e){return new Promise((function(n,t){a([e,n,t])}))}),[a])},n.useAtomValue=function(e,n){return Zn.useAtom(e,n)[0]},n.useHydrateAtoms=function(e,n){for(var t,r=Zn.SECRET_INTERNAL_getStoreContext(n),a=u.a.useContext(r),i=a[3],c=function(e){var n=y.get(e);n||(n=new WeakSet,y.set(e,n));return n}(a),s=[],l=o(e);!(t=l()).done;){var _=t.value,d=_[0];c.has(d)||(c.add(d),s.push(_))}s.length&&i(s)},n.useReducerAtom=function(e,n,t){var r=Zn.useAtom(e,t),a=r[0],i=r[1];return[a,u.a.useCallback((function(e){i((function(t){return n(t,e)}))}),[i,n])]},n.useResetAtom=function(e,n){var r=Zn.SECRET_INTERNAL_getStoreContext(n),a=u.a.useContext(r)[1];return u.a.useCallback((function(){return a(e,t)}),[a,e])},n.useUpdateAtom=r,n.waitForAll=function(e){var n=Array.isArray(e)&&c(m,e);if(n)return n;var t=h(e),r=Zn.atom((function(n){var r=[],a=t.map((function(e,t){try{return n(e)}catch(a){if(!(a instanceof Promise))throw a;r[t]=a}}));if(r.length)throw Promise.all(r);return b(e,a)}));return Array.isArray(e)&&s(m,e,r),r}}));function Vn(){return Vn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Vn.apply(this,arguments)}function Hn(e){return s.createElement("svg",Vn({xmlns:"http://www.w3.org/2000/svg",height:20,viewBox:"0 0 24 24",width:20,fill:"currentColor"},e),Dn||(Dn=s.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),Fn||(Fn=s.createElement("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4l-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"})))}function Jn(){return Jn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Jn.apply(this,arguments)}function Gn(e){return s.createElement("svg",Jn({xmlns:"http://www.w3.org/2000/svg",height:16,viewBox:"0 0 24 24",width:16,fill:"currentColor"},e),qn||(qn=s.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),Bn||(Bn=s.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"})))}mn('/* ************************\n** Variables\n** ********************* */\n:root {\n  --msg-list__background: var(--chat--light__background--1);\n  --msg-list__padding: 0;\n  --msg-list__unread__background: var(--chat--light__color--2);\n  --msg-list__unread__borderRadius: 20px;\n  --msg-list__unread__color: var(--chat--light__background--2);\n  --msg-list__unread__fontSize: 13px;\n  --msg-list__unread__fontWeight: 400;\n  --msg-list__unread__padding: 8px 16px;\n  --msg-list__unread__offset: 50px;\n  --msg-list__spinner__color: var(--chat--light__color--2);\n  --msg-list__spinner__margin: 10px auto;\n  --msg--hover__background: var(--chat--light__hover--3);\n  --msg__alignItems: flex-start;\n  --msg__flexDirection: row;\n  --msg__height: auto;\n  --msg__padding: 10px 16px;\n  --msg__actions--hover__background: transparent;\n  --msg__actions--hover__color: var(--chat--light__hover--1);\n  --msg__actions--hover__border: 1px solid var(--chat--light__border--1);\n  --msg__actions__background: transparent;\n  --msg__actions__border: 1px solid var(--chat--light__border--1);\n  --msg__actions__borderRadius: 15px;\n  --msg__actions__color: var(--chat--light__color--2);\n  --msg__actions__fontSize: 22px;\n  --msg__actions__margin: 0 0 0 4px;\n  --msg__actions__padding: 0 7px;\n  --msg__actions__right: 10px;\n  --msg__actions__top: 10px;\n  --msg__author__color: var(--chat--light__color--1);\n  --msg__author__fontSize: 15px;\n  --msg__author__fontWeight: 500;\n  --msg__author__padding: 0;\n  --msg__avatar__display: flex;\n  --msg__avatar__fontSize: 10px;\n  --msg__avatar__margin: 2px 18px 0 0;\n  --msg__avatar__size: 36px;\n  --msg__avatar__borderRadius: 36px;\n  --msg__bubble__background: transparent;\n  --msg__bubble__boxShadow: none;\n  --msg__bubble__borderRadius: 0;\n  --msg__bubble__color: var(--chat--light__color--1);\n  --msg__bubble__fontSize: 13px;\n  --msg__bubble__fontWeight: 400;\n  --msg__bubble__margin: 0;\n  --msg__bubble__padding: 0;\n  --msg__content__alignItems: flex-start;\n  --msg__content__flexDirection: column;\n  --msg__content__margin: 0;\n  --msg__image__borderRadius: 10px;\n  --msg__image__margin: 15px 0 0;\n  --msg__link__margin: 10px 0 0;\n  --msg__link__padding: 20px;\n  --msg__link-description__color: var(--chat--light__color--2);\n  --msg__link-thumb__maxWidth: 210px;\n  --msg__link-title__color: var(--chat--light__color--1);\n  --msg__main__alignItems: flex-start;\n  --msg__main__flexDirection: column;\n  --msg__main__margin: 0;\n  --msg__main__maxWidth: 60%;\n  --msg__time__display: block;\n  --msg__time__color: var(--chat--light__color--1);\n  --msg__time__fontSize: 11px;\n  --msg__time__fontWeight: 300;\n  --msg__time__padding: 0 10px;\n  --msg__title__alignItems: baseline;\n  --msg__title__display: flex;\n  --msg__title__margin: 0 0 10px;\n  --msg__reaction--hover__background: var(--chat--light__hover--4);\n  --msg__reaction--hover__border: 1px solid var(--chat--light__border--2);\n  --msg__reaction--active__background: rgba(var(--chat--light__background--5-rgb), 0.2);\n  --msg__reaction--active__border: 1px solid transparent;\n  --msg__reaction--active--hover__background: rgba(var(--chat--light__background--5-rgb), 0.24);\n  --msg__reaction--active--hover__border: 1px solid rgba(var(--chat--light__background--5-rgb), 0.4);\n  --msg__reaction__background: transparent;\n  --msg__reaction__border: 1px solid var(--chat--light__border--1);\n  --msg__reaction__borderRadius: 15px;\n  --msg__reaction__margin: 10px 5px 0 0;\n  --msg__reaction__padding: 0 7px 0 3px;\n  --msg__reaction__wordSpacing: 2px;\n}\n\n/* ************************\n** Styles\n** ********************* */\n.pn-msg-list {\n  background: var(--msg-list__background);\n  height: 100%;\n  overflow: hidden;\n  padding: var(--msg-list__padding);\n  position: relative;\n  width: 100%;\n}\n.pn-msg-list-scroller {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: auto;\n  overscroll-behavior-y: contain;\n  position: relative;\n  scroll-snap-type: y proximity;\n  transform: translateZ(0);\n  width: 100%;\n}\n.pn-msg-list__spinner {\n  color: var(--msg-list__spinner__color);\n  margin: var(--msg-list__spinner__margin);\n}\n.pn-msg-list__unread {\n  background: var(--msg-list__unread__background);\n  border-radius: var(--msg-list__unread__borderRadius);\n  color: var(--msg-list__unread__color);\n  cursor: pointer;\n  font-size: var(--msg-list__unread__fontSize);\n  font-weight: var(--msg-list__unread__fontWeight);\n  left: 50%;\n  padding: var(--msg-list__unread__padding);\n  position: fixed;\n  top: var(--msg-list__unread__offset);\n  transform: translateX(50%);\n  z-index: 5;\n}\n.pn-msg-list__unread svg {\n  vertical-align: bottom;\n}\n.pn-msg-list__bottom-ref {\n  flex-shrink: 0;\n  height: 1px;\n  scroll-snap-align: end;\n  width: 100%;\n}\n.pn-msg-list__spacer {\n  flex: 1 1 auto;\n}\n.pn-msg-list__emoji-picker {\n  position: absolute;\n  right: 50px;\n  z-index: 10;\n}\n.pn-msg-list__emoji-picker-hidden {\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.pn-msg {\n  align-items: var(--msg__alignItems);\n  display: flex;\n  flex-direction: var(--msg__flexDirection);\n  height: var(--msg__height);\n  padding: var(--msg__padding);\n  position: relative;\n}\n.pn-msg:hover {\n  background: var(--msg--hover__background);\n}\n.pn-msg:hover .pn-msg__actions {\n  display: flex;\n}\n.pn-msg__actions {\n  color: var(--msg__actions__color);\n  cursor: pointer;\n  display: none;\n  font-size: var(--msg__actions__fontSize);\n  position: absolute;\n  right: var(--msg__actions__right);\n  top: var(--msg__actions__top);\n}\n.pn-msg__actions > * {\n  background: var(--msg__actions__background);\n  border: var(--msg__actions__border);\n  border-radius: var(--msg__actions__borderRadius);\n  display: flex;\n  margin: var(--msg__actions__margin);\n  padding: var(--msg__actions__padding);\n}\n.pn-msg__actions > *:hover {\n  background: var(--msg__actions--hover__background);\n  border: var(--msg__actions--hover__border);\n  color: var(--msg__actions--hover__color);\n}\n.pn-msg__main {\n  align-items: var(--msg__main__alignItems);\n  display: flex;\n  flex-direction: var(--msg__main__flexDirection);\n  padding: var(--msg__main__margin);\n  max-width: var(--msg__main__maxWidth);\n}\n.pn-msg__content {\n  align-items: var(--msg__content__alignItems);\n  display: flex;\n  flex-direction: var(--msg__content__flexDirection);\n  padding: var(--msg__content__margin);\n}\n.pn-msg__title {\n  align-items: var(--msg__title__alignItems);\n  display: var(--msg__title__display);\n  margin: var(--msg__title__margin);\n}\n.pn-msg__bubble {\n  background: var(--msg__bubble__background);\n  box-shadow: var(--msg__bubble__boxShadow);\n  border-radius: var(--msg__bubble__borderRadius);\n  color: var(--msg__bubble__color);\n  display: inline-block;\n  font-size: var(--msg__bubble__fontSize);\n  font-weight: var(--msg__bubble__fontWeight);\n  margin: var(--msg__bubble__margin);\n  padding: var(--msg__bubble__padding);\n}\n.pn-msg__author {\n  color: var(--msg__author__color);\n  font-size: var(--msg__author__fontSize);\n  font-weight: var(--msg__author__fontWeight);\n  padding: var(--msg__author__padding);\n}\n.pn-msg__time {\n  display: var(--msg__time__display);\n  color: var(--msg__time__color);\n  font-size: var(--msg__time__fontSize);\n  font-weight: var(--msg__time__fontWeight);\n  padding: var(--msg__time__padding);\n}\n.pn-msg__avatar {\n  align-items: center;\n  border-radius: var(--msg__avatar__borderRadius);\n  color: var(--msg-list__background);\n  display: var(--msg__avatar__display);\n  font-size: var(--msg__avatar__fontSize);\n  height: var(--msg__avatar__size);\n  justify-content: center;\n  margin: var(--msg__avatar__margin);\n  width: var(--msg__avatar__size);\n}\n.pn-msg__avatar img {\n  border-radius: var(--msg__avatar__borderRadius);\n  height: 100%;\n  width: 100%;\n}\n.pn-msg__reaction {\n  background: var(--msg__reaction__background);\n  border: var(--msg__reaction__border);\n  border-radius: var(--msg__reaction__borderRadius);\n  color: var(--msg__bubble__color);\n  cursor: pointer;\n  display: inline-block;\n  font-size: var(--msg__bubble__fontSize);\n  font-weight: var(--msg__bubble__fontWeight);\n  margin: var(--msg__reaction__margin);\n  padding: var(--msg__reaction__padding);\n  word-spacing: var(--msg__reaction__wordSpacing);\n}\n.pn-msg__reaction:hover {\n  background: var(--msg__reaction--hover__background);\n  border: var(--msg__reaction--hover__border);\n}\n.pn-msg__reaction--active {\n  background: var(--msg__reaction--active__background);\n  border: var(--msg__reaction--active__border);\n}\n.pn-msg__reaction--active:hover {\n  background: var(--msg__reaction--active--hover__background);\n  border: var(--msg__reaction--active--hover__border);\n}\n.pn-msg__image {\n  border-radius: var(--msg__image__borderRadius);\n  box-shadow: var(--msg__bubble__boxShadow);\n  margin: var(--msg__image__margin);\n  max-width: 100%;\n}\n.pn-msg__link {\n  background: var(--msg__bubble__background);\n  border-radius: var(--msg__bubble__borderRadius);\n  box-shadow: var(--msg__bubble__boxShadow);\n  color: var(--msg__bubble__color);\n  display: flex;\n  font-size: var(--msg__bubble__fontSize);\n  font-weight: var(--msg__bubble__fontWeight);\n  margin: var(--msg__link__margin);\n  overflow: hidden;\n  text-decoration: none;\n}\n.pn-msg__link img {\n  max-width: var(--msg__link-thumb__maxWidth);\n}\n.pn-msg__link > div {\n  padding: var(--msg__link__padding);\n}\n.pn-msg__link-name {\n  font-size: 15px;\n  font-weight: 500;\n  margin: 0;\n}\n.pn-msg__link-name img {\n  margin-right: 10px;\n  max-height: 16px;\n  max-width: 16px;\n  vertical-align: bottom;\n}\n.pn-msg__link-title {\n  color: var(--msg__link-title__color);\n  font-weight: 500;\n  margin: 2px 0;\n}\n.pn-msg__link-description {\n  color: var(--msg__link-description__color);\n  margin: 0;\n}\n.pn-msg__nonImage {\n  color: var(--msg__bubble__color);\n}\n.pn-msg__downloadIcon {\n  color: var(--msg__bubble__color);\n  margin: 0 0 0 8px;\n  vertical-align: middle;\n}\n\n/* ************************\n** Themes\n** ********************* */\n.pn-msg-list--dark,\n.pn-msg-list--support-dark,\n.pn-msg-list--event-dark {\n  --msg-list__background: var(--chat--dark__background--1);\n  --msg-list__unread__background: var(--chat--dark__color--2);\n  --msg-list__unread__color: var(--chat--dark__background--2);\n  --msg-list__spinner__color: var(--chat--dark__color--2);\n  --msg--hover__background: var(--chat--dark__border--1);\n  --msg__actions--hover__color: var(--chat--dark__hover--1);\n  --msg__actions--hover__border: 1px solid var(--chat--dark__background--1);\n  --msg__actions--hover__background: var(--chat--dark__background--1);\n  --msg__actions__background: var(--chat--dark__background--1);\n  --msg__actions__border: 1px solid var(--chat--dark__background--1);\n  --msg__actions__color: var(--chat--dark__color--2);\n  --msg__author__color: var(--chat--dark__color--1);\n  --msg__bubble__color: var(--chat--dark__color--1);\n  --msg__link-description__color: var(--chat--dark__color--2);\n  --msg__link-title__color: var(--chat--dark__color--1);\n  --msg__time__color: var(--chat--dark__color--1);\n  --msg__reaction--hover__background: rgba(var(--chat--dark__hover--4-rgb), 0.3);\n  --msg__reaction--hover__border: 1px solid var(--chat--dark__hover--4);\n  --msg__reaction--active__background: rgba(var(--chat--dark__background--5), 0.3);\n  --msg__reaction--active--hover__background: rgba(var(--chat--dark__background--5), 0.4);\n  --msg__reaction--active--hover__border: 1px solid rgba(var(--chat--dark__background--5), 0.4);\n  --msg__reaction__background: var(--chat--dark__background--1);\n  --msg__reaction__border: 1px solid var(--chat--dark__border--1);\n}\n\n.pn-msg-list--support,\n.pn-msg-list--support-dark {\n  --msg__title__display: none;\n}\n.pn-msg-list--support .pn-msg--own,\n.pn-msg-list--support-dark .pn-msg--own {\n  --msg__flexDirection: row-reverse;\n  --msg__avatar__display: none;\n}\n\n.pn-msg-list--event,\n.pn-msg-list--event-dark {\n  --msg__alignItems: flex-start;\n  --msg__actions__top: 0;\n  --msg__author__fontSize: 13px;\n  --msg__avatar__display: none;\n  --msg__bubble__background: transparent;\n  --msg__bubble__padding: 0;\n  --msg__content__alignItems: center;\n  --msg__content__flexDirection: row;\n  --msg__main__alignItems: baseline;\n  --msg__main__flexDirection: column;\n  --msg__main__maxWidth: 100%;\n  --msg__padding: 7px 12px;\n  --msg__time__display: none;\n  --msg__title__margin: 0 6px 0 0;\n}\n.pn-msg-list--event .pn-msg__author:after,\n.pn-msg-list--event-dark .pn-msg__author:after {\n  content: ":";\n}');var Yn=function(e){var n=Object(l.b)(),t=te(nn)[0],r=te(an)[0],a=te(en)[0],i=te(ln)[0],o=te(_n)[0],c=te(dn)[0],d=te(fn)[0],f=i.function,b=o.function,v=Object(s.useState)(!0),g=v[0],j=v[1],y=Object(s.useState)([]),O=y[0],x=y[1],w=Object(s.useState)(0),k=w[0],E=w[1],S=Object(s.useState)(!1),A=S[0],C=S[1],N=Object(s.useState)(),z=N[0],T=N[1],M=Object(s.useState)(!1),I=M[0],P=M[1],U=Object(s.useState)(null),R=U[0],L=U[1],W=Object(s.useRef)(null),D=Object(s.useRef)(null),F=Object(s.useRef)(null),q=Sn((function(e){e.target.closest(".pn-msg__reactions-toggle")||P(!1)})),B=Object(s.useRef)(new IntersectionObserver((function(e){return!0===e[0].isIntersecting&&G()}))),Z=Object(s.useRef)(new IntersectionObserver((function(e){return Q(e[0].isIntersecting)}))),$=function(){W.current&&W.current.scrollIntoView({behavior:"smooth",block:"nearest"})},V=function(){F.current&&B.current.observe(F.current)},H=function(){W.current&&(Z.current.disconnect(),Z.current.observe(W.current))},J=function(e){return n.getUUID()===e},G=$n.useAtomCallback(Object(s.useCallback)((function(t){return p(void 0,void 0,void 0,(function(){var r,a,i,o,c,s,u,l,_,d;return m(this,(function(f){switch(f.label){case 0:if(r=t(nn),a=t(ln),i=t(_n),o=t(dn),c=a.function,s=i.function,u=null===(d=D.current)||void 0===d?void 0:d.querySelector(".pn-msg"),!o.length)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,c((function(){return n.fetchMessages({channels:[r],count:e.fetchMessages,start:(null===o||void 0===o?void 0:o[0].timetoken)||void 0,includeMessageActions:!0})}))];case 2:return l=f.sent(),X(l),u&&u.scrollIntoView(),[3,4];case 3:return _=f.sent(),s(_),[3,4];case 4:return[2]}}))}))}),[])),Y=function(e,r){try{n.addMessageAction({channel:t,messageTimetoken:r,action:{type:"reaction",value:e}})}catch(a){b(a)}},K=Object(s.useCallback)((function(e){try{if(!("native"in e))return;Y(e.native,R),P(!1)}catch(n){b(n)}}),[R]),Q=function(e){try{e&&E(0),j(e)}catch(n){b(n)}},X=$n.useAtomCallback(Object(s.useCallback)((function(t,r,a){var i=t(nn),o=t(dn),c=((null===a||void 0===a?void 0:a.channels[i])||[]).map((function(e){return 4===e.messageType?function(e){if(!_(e.message))return e;try{var t=n.getFileUrl({channel:e.channel,id:e.message.file.id,name:e.message.file.name});e.message.file.url=t}catch(r){b(r)}finally{return e}}(e):e}))||[],s=h(h([],o,!0),c,!0).sort((function(e,n){return e.timetoken-n.timetoken}));P(!1),x(s),r(dn,s),r(fn,!s.length||c.length!==e.fetchMessages)}),[]));Object(s.useEffect)((function(){n&&t&&((null===c||void 0===c?void 0:c.length)||p(void 0,void 0,void 0,(function(){var r,a;return m(this,(function(i){switch(i.label){case 0:if(!e.fetchMessages)return[2];i.label=1;case 1:return i.trys.push([1,3,4,5]),C(!0),[4,f((function(){return n.fetchMessages({channels:[t],count:e.fetchMessages,includeMessageActions:!0})}))];case 2:return r=i.sent(),X(r),$(),V(),H(),[3,5];case 3:return a=i.sent(),b(a),[3,5];case 4:return C(!1),[7];case 5:return[2]}}))})),V())}),[t]),Object(s.useEffect)((function(){u.a.isValidElement(e.reactionsPicker)&&T(u.a.cloneElement(e.reactionsPicker,{onSelect:K}))}),[e.reactionsPicker,K]),Object(s.useEffect)((function(){if(null===c||void 0===c?void 0:c.length){var e=c.length-O.length;g&&$(),!g&&e&&E(k+e),H(),x(c)}}),[c]);var ee=function(n){var t=n.uuid||n.publisher||"",r=J(t)?"pn-msg--own":"",a=n.actions,i=!!Object.keys((null===a||void 0===a?void 0:a.deleted)||{}).length,o=_(n.message)?n.message.message:n.message;if(!i)return u.a.createElement("div",{className:"pn-msg "+r,key:n.timetoken},ne(n),u.a.createElement("div",{className:"pn-msg__actions"},e.extraActionsRenderer&&e.extraActionsRenderer(n),e.reactionsPicker&&"welcome"!==(null===o||void 0===o?void 0:o.type)&&u.a.createElement("div",{className:"pn-msg__reactions-toggle",title:"Add a reaction",onClick:function(e){I&&R===n.timetoken?P(!1):function(n,t){try{var r=D.current.scrollTop-D.current.getBoundingClientRect().top+n.target.getBoundingClientRect().y;r>q.current.offsetHeight&&(r+=n.target.getBoundingClientRect().height,r-=q.current.offsetHeight),q.current.style.top=r+"px",P(!0),L(t)}catch(e){b(e)}}(e,n.timetoken)}},u.a.createElement(Cn,null))))},ne=function(n){var t=n.uuid||n.publisher||"",a=function(e){var n=String(e),t=new Date(parseInt(n)/1e4);return new Intl.DateTimeFormat([],{timeStyle:"short"}).format(t)}(n.timetoken),i=J(t),o=_(n.message)?n.message.message:n.message,c=(null===o||void 0===o?void 0:o.sender)||function(e){return r.find((function(n){return n.id===e}))}(t),s=(null===o||void 0===o?void 0:o.attachments)||[],l=_(n.message)&&n.message.file,d=n.actions,f=(Object.entries((null===d||void 0===d?void 0:d.updated)||{}).pop()||[]).shift();return!e.messageRenderer||e.filter&&!e.filter(n)?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"pn-msg__avatar",style:{backgroundColor:En(t)}},(null===c||void 0===c?void 0:c.profileUrl)?u.a.createElement("img",{src:c.profileUrl,alt:"User avatar"}):kn((null===c||void 0===c?void 0:c.name)||t)),u.a.createElement("div",{className:"pn-msg__main"},u.a.createElement("div",{className:"pn-msg__content"},u.a.createElement("div",{className:"pn-msg__title"},u.a.createElement("span",{className:"pn-msg__author"},(null===c||void 0===c?void 0:c.name)||t),u.a.createElement("span",{className:"pn-msg__time"},a)),(null===o||void 0===o?void 0:o.text)&&(!e.bubbleRenderer||e.filter&&!e.filter(n)?u.a.createElement("div",{className:"pn-msg__bubble"},f||(null===o||void 0===o?void 0:o.text)):e.bubbleRenderer({message:n,user:c,time:a,isOwn:i,editedText:f}))),u.a.createElement("div",{className:"pn-msg__extras"},l&&l.name&&ae(l),s.map(ie),e.enableReactions&&re(n)))):e.messageRenderer({message:n,user:c,time:a,isOwn:i,editedText:f})},re=function(e){var r,a=null===(r=e.actions)||void 0===r?void 0:r.reaction;if(a)return u.a.createElement("div",{className:"pn-msg__reactions"},Object.keys(a).map((function(r){var i=a[r],o=null===i||void 0===i?void 0:i.find((function(e){return e.uuid===n.getUUID()}));return u.a.createElement("div",{className:"pn-msg__reaction "+(o?"pn-msg__reaction--active":""),key:r,onClick:function(){o?function(e,r,a){try{n.removeMessageAction({channel:t,messageTimetoken:r,actionTimetoken:a})}catch(i){b(i)}}(0,e.timetoken,o.actionTimetoken):Y(r,e.timetoken)}},r," ",i.length)})))},ae=function(e){return u.a.createElement("div",{className:"pn-msg__file"},/\.(svg|gif|jpe?g|tiff?|png|webp|bmp)$/i.test(e.name)?u.a.createElement("img",{alt:e.name,className:"pn-msg__image",src:e.url,onLoad:function(){g&&$()}}):u.a.createElement("div",{className:"pn-msg__bubble"},u.a.createElement("a",{className:"pn-msg__nonImage",href:e.url,target:"_blank",rel:"noopener noreferrer",download:!0},e.name,u.a.createElement(Hn,{className:"pn-msg__downloadIcon"}))))},ie=function(e,n){var t,r,a,i,o;return u.a.createElement("div",{key:n,className:"pn-msg__attachments"},"image"===e.type&&u.a.createElement("img",{className:"pn-msg__image",src:null===(t=e.image)||void 0===t?void 0:t.source}),"link"===e.type&&u.a.createElement("a",{className:"pn-msg__link",href:null===(r=e.provider)||void 0===r?void 0:r.url,target:"_blank",rel:"noreferrer noopener"},u.a.createElement("img",{src:null===(a=e.image)||void 0===a?void 0:a.source}),u.a.createElement("div",null,u.a.createElement("p",{className:"pn-msg__link-name"},u.a.createElement("img",{src:null===(i=e.icon)||void 0===i?void 0:i.source}),null===(o=e.provider)||void 0===o?void 0:o.name),u.a.createElement("p",{className:"pn-msg__link-title"},e.title),u.a.createElement("p",{className:"pn-msg__link-description"},e.description))))};return u.a.createElement("div",{className:"pn-msg-list pn-msg-list--"+a},k>0&&u.a.createElement("div",{className:"pn-msg-list__unread",onClick:function(){return $()}},k," new message",k>1?"s":""," ",u.a.createElement(Gn,null)),u.a.createElement("div",{className:"pn-msg-list-scroller",onScroll:e.onScroll,ref:D},!!e.fetchMessages&&!d&&u.a.createElement("span",{ref:F,className:"pn-msg-list__spinner"},u.a.createElement(Rn,null)),u.a.createElement("div",{className:"pn-msg-list__spacer"}),(!e.fetchMessages||!A&&!c.length)&&function(){if(e.welcomeMessages)return Array.isArray(e.welcomeMessages)?e.welcomeMessages.map((function(e){return ee(e)})):ee(e.welcomeMessages)}(),c&&c.map((function(e){return ee(e)})),e.children,u.a.createElement("div",{className:"pn-msg-list__bottom-ref",ref:W}),e.reactionsPicker&&u.a.createElement("div",{className:"pn-msg-list__emoji-picker "+(!I&&"pn-msg-list__emoji-picker-hidden"),ref:q},z)))};Yn.defaultProps={enableReactions:!1,fetchMessages:0};mn("/* ************************\n** Variables\n** ********************* */\n:root {\n  --member-list__background: transparent;\n  --member__alignItems: center;\n  --member__cursor: auto;\n  --member__padding: 8px 16px;\n  --member__background: transparent;\n  --member--hover__background: transparent;\n  --member__avatar__color: var(--chat--light__background--2);\n  --member__avatar__display: flex;\n  --member__avatar__fontSize: 10px;\n  --member__avatar__margin: 0 18px 0 0;\n  --member__avatar__size: 36px;\n  --member__avatar__borderRadius: 36px;\n  --member__name__color: var(--chat--light__color--1);\n  --member__name__fontSize: 13px;\n  --member__name__fontWeight: 400;\n  --member__name__padding: 0;\n  --member__name__margin: 0;\n  --member__title__color: var(--chat--light__color--2);\n  --member__title__display: inline-block;\n  --member__title__fontSize: 11px;\n  --member__title__fontWeight: 400;\n  --member__title__padding: 7px 0 0;\n  --member__title__margin: 0;\n  --member__presence__border: 3px solid var(--chat--light__background--2);\n  --member__presence__borderRadius: 100%;\n  --member__presence__color: var(--chat--light__background--4);\n  --member__presence__left: 48px;\n  --member__presence__position: absolute;\n  --member__presence__size: 8px;\n  --member__presence__top: 34px;\n  --member__actions--hover__background: transparent;\n  --member__actions__background: transparent;\n  --member__actions__borderRadius: 5px;\n  --member__actions__color: var(--chat--light__color--2);\n  --member__actions--hover__color: var(--chat--light__hover--1);\n  --member__actions__fontSize: 18px;\n  --member__actions__margin: 0 0 0 4px;\n  --member__actions__padding: 3px 5px;\n}\n\n/* ************************\n** Styles\n** ********************* */\n.pn-member-list {\n  height: 100%;\n  overflow-y: auto;\n  width: 100%;\n  background: var(--member-list__background);\n}\n\n.pn-member {\n  align-items: var(--member__alignItems);\n  background: var(--member__background);\n  cursor: var(--member__cursor);\n  display: flex;\n  padding: var(--member__padding);\n  position: relative;\n}\n.pn-member:hover {\n  background: var(--member--hover__background);\n}\n.pn-member:hover .pn-member__actions {\n  visibility: visible;\n}\n.pn-member__avatar {\n  align-items: center;\n  border-radius: var(--member__avatar__borderRadius);\n  color: var(--member__avatar__color);\n  display: var(--member__avatar__display);\n  font-size: var(--member__avatar__fontSize);\n  height: var(--member__avatar__size);\n  justify-content: center;\n  margin: var(--member__avatar__margin);\n  width: var(--member__avatar__size);\n}\n.pn-member__avatar img {\n  border-radius: var(--member__avatar__borderRadius);\n  height: 100%;\n  width: 100%;\n}\n.pn-member__main {\n  flex: 1;\n}\n.pn-member__name {\n  color: var(--member__name__color);\n  font-size: var(--member__name__fontSize);\n  font-weight: var(--member__name__fontWeight);\n  margin: var(--member__name__margin);\n  padding: var(--member__name__padding);\n  text-align: left;\n}\n.pn-member__title {\n  color: var(--member__title__color);\n  display: var(--member__title__display);\n  font-size: var(--member__title__fontSize);\n  font-weight: var(--member__title__fontWeight);\n  margin: var(--member__title__margin);\n  padding: var(--member__title__padding);\n  text-align: left;\n}\n.pn-member__presence {\n  background: var(--member__presence__color);\n  border: var(--member__presence__border);\n  border-radius: var(--member__presence__borderRadius);\n  height: var(--member__presence__size);\n  left: var(--member__presence__left);\n  position: var(--member__presence__position);\n  top: var(--member__presence__top);\n  width: var(--member__presence__size);\n}\n.pn-member__actions {\n  color: var(--member__actions__color);\n  cursor: pointer;\n  display: flex;\n  visibility: hidden;\n  font-size: var(--member__actions__fontSize);\n}\n.pn-member__actions > * {\n  background: var(--member__actions__background);\n  border-radius: var(--member__actions__borderRadius);\n  display: flex;\n  margin: var(--member__actions__margin);\n  padding: var(--member__actions__padding);\n}\n.pn-member__actions > *:hover {\n  background: var(--member__actions--hover__background);\n  color: var(--member__actions--hover__color);\n}\n\n/* ************************\n** Themes\n** ********************* */\n.pn-member-list--dark,\n.pn-member-list--event-dark,\n.pn-member-list--support-dark {\n  --member-list__background: var(--chat--dark__background--2);\n  --member__avatar__color: var(--chat--dark__background--2);\n  --member__name__color: var(--chat--dark__color--1);\n  --member__title__color: var(--chat--dark__color--2);\n  --member__presence__border: 3px solid var(--chat--dark__background--2);\n  --member__presence__color: var(--chat--dark__background--4);\n  --member__actions__color: var(--chat--dark__color--2);\n  --member__actions--hover__color: var(--chat--dark__hover--1);\n}");var Kn=function(e){var n=Object(l.b)(),t=te(en)[0],r=function(e){return n.getUUID()===e},a=function(n){return e.presentMembers.includes(n)};return u.a.createElement("div",{className:"pn-member-list pn-member-list--"+t},e.members.map((function(e){return"string"===typeof e?{id:e,name:e}:e})).sort((function(e,n){return r(e.id)?-1:r(n.id)?1:a(e.id)&&!a(n.id)?-1:a(n.id)&&!a(e.id)?1:e.name.localeCompare(n.name,"en",{sensitivity:"base"})})).map((function(n){var t;if(e.memberRenderer)return e.memberRenderer(n);var i=r(n.id)?e.selfText:"";return u.a.createElement("div",{key:n.id,className:"pn-member",onClick:function(){return function(n){e.onMemberClicked&&e.onMemberClicked(n)}(n)}},u.a.createElement("div",{className:"pn-member__avatar",style:{backgroundColor:En(n.id)}},n.profileUrl?u.a.createElement("img",{src:n.profileUrl,alt:"User avatar"}):kn(n.name||n.id),a(n.id)&&u.a.createElement("i",{className:"pn-member__presence"})),u.a.createElement("div",{className:"pn-member__main"},u.a.createElement("p",{className:"pn-member__name"},n.name," ",i),u.a.createElement("p",{className:"pn-member__title"},null===(t=n.custom)||void 0===t?void 0:t.title)),u.a.createElement("div",{className:"pn-member__actions"},e.extraActionsRenderer&&e.extraActionsRenderer(n)))})),u.a.createElement(u.a.Fragment,null,e.children))};Kn.defaultProps={members:[],presentMembers:[],onMemberClicked:null,selfText:"(You)"};mn("/* ************************\n** Variables\n** ********************* */\n:root {\n  --channel-list__background: var(--chat--light__background--2);\n  --channel__alignItems: center;\n  --channel__padding: 8px 16px;\n  --channel__justifyContent: flex-start;\n  --channel__background: transparent;\n  --channel--hover__background: var(--chat--light__hover--2);\n  --channel--active__background: var(--chat--light__background--1);\n  --channel__thumb__display: block;\n  --channel__thumb__margin: 0 18px 0 0;\n  --channel__thumb__size: 36px;\n  --channel__thumb__borderRadius: 36px;\n  --channel__name__color: var(--chat--light__color--1);\n  --channel--hover__name__color: var(--chat--light__color--1);\n  --channel--active__name__color: var(--chat--light__color--1);\n  --channel__name__fontSize: 13px;\n  --channel__name__fontWeight: 400;\n  --channel__name__padding: 0;\n  --channel__name__margin: 0;\n  --channel__description__color: var(--chat--light__color--2);\n  --channel--hover__description__color: var(--chat--light__color--2);\n  --channel--active__description__color: var(--chat--light__color--2);\n  --channel__description__display: inline-block;\n  --channel__description__fontSize: 11px;\n  --channel__description__fontWeight: 400;\n  --channel__description__padding: 7px 0 0;\n  --channel__description__margin: 0;\n  --channel__actions--hover__background: transparent;\n  --channel__actions__background: transparent;\n  --channel__actions__borderRadius: 5px;\n  --channel__actions__color: var(--chat--light__color--2);\n  --channel__actions--hover__color: var(--chat--light__hover--1);\n  --channel__actions__fontSize: 18px;\n  --channel__actions__margin: 0 0 0 4px;\n  --channel__actions__padding: 3px 5px;\n}\n\n/* ************************\n** Styles\n** ********************* */\n.pn-channel-list {\n  height: 100%;\n  overflow-y: auto;\n  width: 100%;\n  background: var(--channel-list__background);\n}\n\n.pn-channel {\n  align-items: var(--channel__alignItems);\n  background: var(--channel__background);\n  cursor: pointer;\n  display: flex;\n  justify-content: var(--channel__justifyContent);\n  padding: var(--channel__padding);\n  position: relative;\n}\n.pn-channel:hover {\n  background: var(--channel--hover__background);\n}\n.pn-channel:hover .pn-channel__leave {\n  display: inline;\n}\n.pn-channel:hover .pn-channel__name {\n  color: var(--channel--hover__name__color);\n}\n.pn-channel:hover .pn-channel__description {\n  color: var(--channel--hover__description__color);\n}\n.pn-channel:hover .pn-channel__actions {\n  visibility: visible;\n}\n.pn-channel--active {\n  background: var(--channel--active__background);\n}\n.pn-channel--active .pn-channel__name {\n  color: var(--channel--active__name__color);\n}\n.pn-channel--active .pn-channel__description {\n  color: var(--channel--active__description__color);\n}\n.pn-channel__thumb {\n  border-radius: var(--channel__thumb__borderRadius);\n  display: var(--channel__thumb__display);\n  margin: var(--channel__thumb__margin);\n  width: var(--channel__thumb__size);\n}\n.pn-channel__title {\n  flex: 1;\n}\n.pn-channel__name {\n  color: var(--channel__name__color);\n  font-size: var(--channel__name__fontSize);\n  font-weight: var(--channel__name__fontWeight);\n  margin: var(--channel__name__margin);\n  padding: var(--channel__name__padding);\n  text-align: left;\n  word-break: break-word;\n}\n.pn-channel__description {\n  color: var(--channel__description__color);\n  display: var(--channel__description__display);\n  font-size: var(--channel__description__fontSize);\n  font-weight: var(--channel__description__fontWeight);\n  margin: var(--channel__description__margin);\n  padding: var(--channel__description__padding);\n  text-align: left;\n}\n.pn-channel__actions {\n  color: var(--channel__actions__color);\n  cursor: pointer;\n  display: flex;\n  visibility: hidden;\n  font-size: var(--channel__actions__fontSize);\n}\n.pn-channel__actions > * {\n  background: var(--channel__actions__background);\n  border-radius: var(--channel__actions__borderRadius);\n  display: flex;\n  margin: var(--channel__actions__margin);\n  padding: var(--channel__actions__padding);\n}\n.pn-channel__actions > *:hover {\n  background: var(--channel__actions--hover__background);\n  color: var(--channel__actions--hover__color);\n}\n.pn-channel__leave {\n  color: var(--channel__leave__color);\n  display: none;\n  height: var(--channel__leave__size);\n  position: absolute;\n  right: var(--channel__leave__right);\n  top: var(--channel__leave__top);\n  width: var(--channel__leave__size);\n}\n\n/* ************************\n** Themes\n** ********************* */\n.pn-channel-list--dark,\n.pn-channel-list--event-dark,\n.pn-channel-list--support-dark {\n  --channel-list__background: var(--chat--dark__background--2);\n  --channel--hover__background: var(--chat--dark__hover--2);\n  --channel--active__background: var(--chat--dark__background--1);\n  --channel__name__color: var(--chat--dark__color--1);\n  --channel--hover__name__color: var(--chat--dark__color--1);\n  --channel--active__name__color: var(--chat--dark__color--1);\n  --channel__description__color: var(--chat--dark__color--2);\n  --channel--hover__description__color: var(--chat--dark__color--2);\n  --channel--active__description__color: var(--chat--dark__color--2);\n  --channel__actions__color: var(--chat--dark__color--2);\n  --channel__actions--hover__color: var(--chat--dark__hover--1);\n}");var Qn=function(e){var n=te(nn)[0],t=te(en)[0];return u.a.createElement("div",{className:"pn-channel-list pn-channel-list--"+t},e.channels.map((function(e){return"string"===typeof e?{id:e,name:e}:e})).sort((function(e,n){var t;return null===(t=null===e||void 0===e?void 0:e.name)||void 0===t?void 0:t.localeCompare(n.name,"en",{sensitivity:"base"})})).map((function(t){var r,a;if(e.channelRenderer)return e.channelRenderer(t);var i=n===t.id?"pn-channel--active":"";return u.a.createElement("div",{key:t.id,className:"pn-channel "+i,onClick:function(){return function(n){e.onChannelSwitched&&e.onChannelSwitched(n)}(t)}},(null===(r=t.custom)||void 0===r?void 0:r.thumb)&&u.a.createElement("img",{className:"pn-channel__thumb",src:null===(a=t.custom)||void 0===a?void 0:a.thumb,alt:"Channel thumb"}),u.a.createElement("div",{className:"pn-channel__title"},u.a.createElement("p",{className:"pn-channel__name"},t.name||t.id),t.description&&u.a.createElement("p",{className:"pn-channel__description"},t.description)),u.a.createElement("div",{className:"pn-channel__actions"},e.extraActionsRenderer&&e.extraActionsRenderer(t)))})),u.a.createElement(u.a.Fragment,null,e.children))},Xn=ie((function(e,n){var t="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",i="[object Array]",o="[object Boolean]",c="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",_="[object Number]",d="[object Object]",f="[object Promise]",p="[object RegExp]",m="[object Set]",h="[object String]",b="[object Symbol]",v="[object WeakMap]",g="[object ArrayBuffer]",j="[object DataView]",y=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[a]=x[i]=x[g]=x[o]=x[j]=x[c]=x[s]=x[u]=x[l]=x[_]=x[d]=x[p]=x[m]=x[h]=x[v]=!1;var w="object"==typeof ae&&ae&&ae.Object===Object&&ae,k="object"==typeof self&&self&&self.Object===Object&&self,E=w||k||Function("return this")(),S=n&&!n.nodeType&&n,A=S&&e&&!e.nodeType&&e,C=A&&A.exports===S,N=C&&w.process,z=function(){try{return N&&N.binding&&N.binding("util")}catch(e){}}(),T=z&&z.isTypedArray;function M(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}function I(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}function P(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}var U,R,L=Array.prototype,W=Function.prototype,D=Object.prototype,F=E["__core-js_shared__"],q=W.toString,B=D.hasOwnProperty,Z=function(){var e=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$=D.toString,V=RegExp("^"+q.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=C?E.Buffer:void 0,J=E.Symbol,G=E.Uint8Array,Y=D.propertyIsEnumerable,K=L.splice,Q=J?J.toStringTag:void 0,X=Object.getOwnPropertySymbols,ee=H?H.isBuffer:void 0,ne=(U=Object.keys,R=Object,function(e){return U(R(e))}),te=ze(E,"DataView"),re=ze(E,"Map"),ie=ze(E,"Promise"),oe=ze(E,"Set"),ce=ze(E,"WeakMap"),se=ze(Object,"create"),ue=Pe(te),le=Pe(re),_e=Pe(ie),de=Pe(oe),fe=Pe(ce),pe=J?J.prototype:void 0,me=pe?pe.valueOf:void 0;function he(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function be(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function ve(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function ge(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new ve;++n<t;)this.add(e[n])}function je(e){var n=this.__data__=new be(e);this.size=n.size}function ye(e,n){var t=Le(e),r=!t&&Re(e),a=!t&&!r&&We(e),i=!t&&!r&&!a&&Ze(e),o=t||r||a||i,c=o?function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}(e.length,String):[],s=c.length;for(var u in e)!n&&!B.call(e,u)||o&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ie(u,s))||c.push(u);return c}function Oe(e,n){for(var t=e.length;t--;)if(Ue(e[t][0],n))return t;return-1}function xe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Q&&Q in Object(e)?function(e){var n=B.call(e,Q),t=e[Q];try{e[Q]=void 0;var r=!0}catch(i){}var a=$.call(e);r&&(n?e[Q]=t:delete e[Q]);return a}(e):function(e){return $.call(e)}(e)}function we(e){return Be(e)&&xe(e)==a}function ke(e,n,t,r,u){return e===n||(null==e||null==n||!Be(e)&&!Be(n)?e!==e&&n!==n:function(e,n,t,r,u,f){var v=Le(e),y=Le(n),O=v?i:Me(e),x=y?i:Me(n),w=(O=O==a?d:O)==d,k=(x=x==a?d:x)==d,E=O==x;if(E&&We(e)){if(!We(n))return!1;v=!0,w=!1}if(E&&!w)return f||(f=new je),v||Ze(e)?Ae(e,n,t,r,u,f):function(e,n,t,r,a,i,u){switch(t){case j:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case g:return!(e.byteLength!=n.byteLength||!i(new G(e),new G(n)));case o:case c:case _:return Ue(+e,+n);case s:return e.name==n.name&&e.message==n.message;case p:case h:return e==n+"";case l:var d=I;case m:var f=1&r;if(d||(d=P),e.size!=n.size&&!f)return!1;var v=u.get(e);if(v)return v==n;r|=2,u.set(e,n);var y=Ae(d(e),d(n),r,a,i,u);return u.delete(e),y;case b:if(me)return me.call(e)==me.call(n)}return!1}(e,n,O,t,r,u,f);if(!(1&t)){var S=w&&B.call(e,"__wrapped__"),A=k&&B.call(n,"__wrapped__");if(S||A){var C=S?e.value():e,N=A?n.value():n;return f||(f=new je),u(C,N,t,r,f)}}if(!E)return!1;return f||(f=new je),function(e,n,t,r,a,i){var o=1&t,c=Ce(e),s=c.length,u=Ce(n).length;if(s!=u&&!o)return!1;var l=s;for(;l--;){var _=c[l];if(!(o?_ in n:B.call(n,_)))return!1}var d=i.get(e);if(d&&i.get(n))return d==n;var f=!0;i.set(e,n),i.set(n,e);var p=o;for(;++l<s;){var m=e[_=c[l]],h=n[_];if(r)var b=o?r(h,m,_,n,e,i):r(m,h,_,e,n,i);if(!(void 0===b?m===h||a(m,h,t,r,i):b)){f=!1;break}p||(p="constructor"==_)}if(f&&!p){var v=e.constructor,g=n.constructor;v==g||!("constructor"in e)||!("constructor"in n)||"function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g||(f=!1)}return i.delete(e),i.delete(n),f}(e,n,t,r,u,f)}(e,n,t,r,ke,u))}function Ee(e){return!(!qe(e)||function(e){return!!Z&&Z in e}(e))&&(De(e)?V:y).test(Pe(e))}function Se(e){if(!function(e){var n=e&&e.constructor,t="function"==typeof n&&n.prototype||D;return e===t}(e))return ne(e);var n=[];for(var t in Object(e))B.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Ae(e,n,t,r,a,i){var o=1&t,c=e.length,s=n.length;if(c!=s&&!(o&&s>c))return!1;var u=i.get(e);if(u&&i.get(n))return u==n;var l=-1,_=!0,d=2&t?new ge:void 0;for(i.set(e,n),i.set(n,e);++l<c;){var f=e[l],p=n[l];if(r)var m=o?r(p,f,l,n,e,i):r(f,p,l,e,n,i);if(void 0!==m){if(m)continue;_=!1;break}if(d){if(!M(n,(function(e,n){if(o=n,!d.has(o)&&(f===e||a(f,e,t,r,i)))return d.push(n);var o}))){_=!1;break}}else if(f!==p&&!a(f,p,t,r,i)){_=!1;break}}return i.delete(e),i.delete(n),_}function Ce(e){return function(e,n,t){var r=n(e);return Le(e)?r:function(e,n){for(var t=-1,r=n.length,a=e.length;++t<r;)e[a+t]=n[t];return e}(r,t(e))}(e,$e,Te)}function Ne(e,n){var t=e.__data__;return function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?t["string"==typeof n?"string":"hash"]:t.map}function ze(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return Ee(t)?t:void 0}he.prototype.clear=function(){this.__data__=se?se(null):{},this.size=0},he.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},he.prototype.get=function(e){var n=this.__data__;if(se){var r=n[e];return r===t?void 0:r}return B.call(n,e)?n[e]:void 0},he.prototype.has=function(e){var n=this.__data__;return se?void 0!==n[e]:B.call(n,e)},he.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=se&&void 0===n?t:n,this},be.prototype.clear=function(){this.__data__=[],this.size=0},be.prototype.delete=function(e){var n=this.__data__,t=Oe(n,e);return!(t<0)&&(t==n.length-1?n.pop():K.call(n,t,1),--this.size,!0)},be.prototype.get=function(e){var n=this.__data__,t=Oe(n,e);return t<0?void 0:n[t][1]},be.prototype.has=function(e){return Oe(this.__data__,e)>-1},be.prototype.set=function(e,n){var t=this.__data__,r=Oe(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new he,map:new(re||be),string:new he}},ve.prototype.delete=function(e){var n=Ne(this,e).delete(e);return this.size-=n?1:0,n},ve.prototype.get=function(e){return Ne(this,e).get(e)},ve.prototype.has=function(e){return Ne(this,e).has(e)},ve.prototype.set=function(e,n){var t=Ne(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},ge.prototype.add=ge.prototype.push=function(e){return this.__data__.set(e,t),this},ge.prototype.has=function(e){return this.__data__.has(e)},je.prototype.clear=function(){this.__data__=new be,this.size=0},je.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},je.prototype.get=function(e){return this.__data__.get(e)},je.prototype.has=function(e){return this.__data__.has(e)},je.prototype.set=function(e,n){var t=this.__data__;if(t instanceof be){var r=t.__data__;if(!re||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new ve(r)}return t.set(e,n),this.size=t.size,this};var Te=X?function(e){return null==e?[]:(e=Object(e),function(e,n){for(var t=-1,r=null==e?0:e.length,a=0,i=[];++t<r;){var o=e[t];n(o,t,e)&&(i[a++]=o)}return i}(X(e),(function(n){return Y.call(e,n)})))}:function(){return[]},Me=xe;function Ie(e,n){return!!(n=null==n?r:n)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<n}function Pe(e){if(null!=e){try{return q.call(e)}catch(n){}try{return e+""}catch(n){}}return""}function Ue(e,n){return e===n||e!==e&&n!==n}(te&&Me(new te(new ArrayBuffer(1)))!=j||re&&Me(new re)!=l||ie&&Me(ie.resolve())!=f||oe&&Me(new oe)!=m||ce&&Me(new ce)!=v)&&(Me=function(e){var n=xe(e),t=n==d?e.constructor:void 0,r=t?Pe(t):"";if(r)switch(r){case ue:return j;case le:return l;case _e:return f;case de:return m;case fe:return v}return n});var Re=we(function(){return arguments}())?we:function(e){return Be(e)&&B.call(e,"callee")&&!Y.call(e,"callee")},Le=Array.isArray;var We=ee||function(){return!1};function De(e){if(!qe(e))return!1;var n=xe(e);return n==u||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Fe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function qe(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Be(e){return null!=e&&"object"==typeof e}var Ze=T?function(e){return function(n){return e(n)}}(T):function(e){return Be(e)&&Fe(e.length)&&!!x[xe(e)]};function $e(e){return null!=(n=e)&&Fe(n.length)&&!De(n)?ye(e):Se(e);var n}e.exports=function(e,n){return ke(e,n)}}));mn("/* ************************\n** Variables\n** ********************* */\n:root {\n  --typing-indicator__background: var(--chat--light__background--1);\n  --typing-indicator__color: var(--chat--light__color--1);\n  --typing-indicator__display: inline-block;\n  --typing-indicator__fontSize: 11px;\n  --typing-indicator__fontWeight: 300;\n  --typing-indicator__padding: 8px 24px;\n  --typing-indicator__dot__fontSize: 8px;\n  --typing-indicator__dot__margin: 0 3px 0 0;\n  --typing-indicator__dot__animationTravel: -12px;\n  --typing-indicator__dot__animationDuration: 1.3s;\n  --typing-indicator__dot__animationTimeout1: -1.1s;\n  --typing-indicator__dot__animationTimeout2: -0.9s;\n}\n\n/* ************************\n** Styles\n** ********************* */\n.pn-typing-indicator {\n  background: var(--typing-indicator__background);\n  color: var(--typing-indicator__color);\n  display: var(--typing-indicator__display);\n  font-size: var(--typing-indicator__fontSize);\n  font-weight: var(--typing-indicator__fontWeight);\n  padding: var(--typing-indicator__padding);\n}\n\n.pn-typing-indicator-dot {\n  display: inline-block;\n  font-size: var(--typing-indicator__dot__fontSize);\n  margin: var(--typing-indicator__dot__margin);\n  animation: wave var(--typing-indicator__dot__animationDuration) linear infinite;\n}\n.pn-typing-indicator-dot:nth-child(2) {\n  animation-delay: var(--typing-indicator__dot__animationTimeout1);\n}\n.pn-typing-indicator-dot:nth-child(3) {\n  animation-delay: var(--typing-indicator__dot__animationTimeout2);\n}\n\n@keyframes wave {\n  0%, 60%, 100% {\n    transform: initial;\n  }\n  30% {\n    transform: translateY(var(--typing-indicator__dot__animationTravel));\n  }\n}\n.pn-typing-indicator--dark,\n.pn-typing-indicator--event-dark,\n.pn-typing-indicator--support-dark {\n  --typing-indicator__background: var(--chat--dark__background--1);\n  --typing-indicator__color: var(--chat--dark__color--1);\n}");var et=function(e){var n=te(en)[0],t=te(an)[0],r=te(pn)[0],a=te(un)[0],i=Object(s.useState)([]),o=i[0],c=i[1],l=Object(s.useRef)(r);Xn(l.current,r)||(l.current=r);var _=Object(s.useCallback)((function(){var e=Object.keys(r).filter((function(e){return Date.now()-parseInt(r[e])/1e4<1e3*a}));c(e)}),[l.current]);Object(s.useEffect)((function(){_();var e=setInterval(_,1e3);return function(){return clearInterval(e)}}),[_]);return u.a.createElement(u.a.Fragment,null,!e.showAsMessage&&!!o.length&&u.a.createElement("div",{className:"pn-typing-indicator pn-typing-indicator--"+n},function(){var e="";if(o.length>1&&(e="Multiple users are typing..."),1==o.length){var n=t.find((function(e){return e.id===o[0]}));e=((null===n||void 0===n?void 0:n.name)||"Unknown User")+" is typing..."}return e}(),"\xa0"),e.showAsMessage&&o.map((function(e){return function(e){var n=t.find((function(n){return n.id===e}));return u.a.createElement("div",{className:"pn-msg",key:e},u.a.createElement("div",{className:"pn-msg__avatar"},(null===n||void 0===n?void 0:n.profileUrl)&&u.a.createElement("img",{src:n.profileUrl,alt:"User avatar"}),!(null===n||void 0===n?void 0:n.profileUrl)&&u.a.createElement("div",{className:"pn-msg__avatar-placeholder"})),u.a.createElement("div",{className:"pn-msg__main"},u.a.createElement("div",{className:"pn-msg__title"},u.a.createElement("span",{className:"pn-msg__author"},(null===n||void 0===n?void 0:n.name)||"Unknown User")),u.a.createElement("div",{className:"pn-msg__bubble"},u.a.createElement("span",{className:"pn-typing-indicator-dot"},"\u25cf"),u.a.createElement("span",{className:"pn-typing-indicator-dot"},"\u25cf"),u.a.createElement("span",{className:"pn-typing-indicator-dot"},"\u25cf"))))}(e)})))};et.defaultProps={showAsMessage:!1};var nt=ie((function(e,n){var t="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",i="[object Function]",o="[object Object]",c=/^\[object .+?Constructor\]$/,s=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[a]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[i]=u["[object Map]"]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var l="object"==typeof ae&&ae&&ae.Object===Object&&ae,_="object"==typeof self&&self&&self.Object===Object&&self,d=l||_||Function("return this")(),f=n&&!n.nodeType&&n,p=f&&e&&!e.nodeType&&e,m=p&&p.exports===f,h=m&&l.process,b=function(){try{var e=p&&p.require&&p.require("util").types;return e||h&&h.binding&&h.binding("util")}catch(n){}}(),v=b&&b.isTypedArray;function g(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}var j,y,O=Array.prototype,x=Function.prototype,w=Object.prototype,k=d["__core-js_shared__"],E=x.toString,S=w.hasOwnProperty,A=function(){var e=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),C=w.toString,N=E.call(Object),z=RegExp("^"+E.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=m?d.Buffer:void 0,M=d.Symbol,I=d.Uint8Array,P=T?T.allocUnsafe:void 0,U=(j=Object.getPrototypeOf,y=Object,function(e){return j(y(e))}),R=Object.create,L=w.propertyIsEnumerable,W=O.splice,D=M?M.toStringTag:void 0,F=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(n){}}(),q=T?T.isBuffer:void 0,B=Math.max,Z=Date.now,$=pe(d,"Map"),V=pe(Object,"create"),H=function(){function e(){}return function(n){if(!Ee(n))return{};if(R)return R(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();function J(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function G(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Y(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function K(e){var n=this.__data__=new G(e);this.size=n.size}function Q(e,n){var t=ye(e),r=!t&&je(e),a=!t&&!r&&xe(e),i=!t&&!r&&!a&&Ae(e),o=t||r||a||i,c=o?function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}(e.length,String):[],s=c.length;for(var u in e)!n&&!S.call(e,u)||o&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||me(u,s))||c.push(u);return c}function X(e,n,t){(void 0!==t&&!ge(e[n],t)||void 0===t&&!(n in e))&&te(e,n,t)}function ee(e,n,t){var r=e[n];S.call(e,n)&&ge(r,t)&&(void 0!==t||n in e)||te(e,n,t)}function ne(e,n){for(var t=e.length;t--;)if(ge(e[t][0],n))return t;return-1}function te(e,n,t){"__proto__"==n&&F?F(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}J.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},J.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},J.prototype.get=function(e){var n=this.__data__;if(V){var r=n[e];return r===t?void 0:r}return S.call(n,e)?n[e]:void 0},J.prototype.has=function(e){var n=this.__data__;return V?void 0!==n[e]:S.call(n,e)},J.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=V&&void 0===n?t:n,this},G.prototype.clear=function(){this.__data__=[],this.size=0},G.prototype.delete=function(e){var n=this.__data__,t=ne(n,e);return!(t<0)&&(t==n.length-1?n.pop():W.call(n,t,1),--this.size,!0)},G.prototype.get=function(e){var n=this.__data__,t=ne(n,e);return t<0?void 0:n[t][1]},G.prototype.has=function(e){return ne(this.__data__,e)>-1},G.prototype.set=function(e,n){var t=this.__data__,r=ne(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new($||G),string:new J}},Y.prototype.delete=function(e){var n=fe(this,e).delete(e);return this.size-=n?1:0,n},Y.prototype.get=function(e){return fe(this,e).get(e)},Y.prototype.has=function(e){return fe(this,e).has(e)},Y.prototype.set=function(e,n){var t=fe(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},K.prototype.clear=function(){this.__data__=new G,this.size=0},K.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},K.prototype.get=function(e){return this.__data__.get(e)},K.prototype.has=function(e){return this.__data__.has(e)},K.prototype.set=function(e,n){var t=this.__data__;if(t instanceof G){var r=t.__data__;if(!$||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Y(r)}return t.set(e,n),this.size=t.size,this};var re,ie=function(e,n,t){for(var r=-1,a=Object(e),i=t(e),o=i.length;o--;){var c=i[re?o:++r];if(!1===n(a[c],c,a))break}return e};function oe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":D&&D in Object(e)?function(e){var n=S.call(e,D),t=e[D];try{e[D]=void 0;var r=!0}catch(i){}var a=C.call(e);r&&(n?e[D]=t:delete e[D]);return a}(e):function(e){return C.call(e)}(e)}function ce(e){return Se(e)&&oe(e)==a}function se(e){return!(!Ee(e)||function(e){return!!A&&A in e}(e))&&(we(e)?z:c).test(function(e){if(null!=e){try{return E.call(e)}catch(n){}try{return e+""}catch(n){}}return""}(e))}function ue(e){if(!Ee(e))return function(e){var n=[];if(null!=e)for(var t in Object(e))n.push(t);return n}(e);var n=he(e),t=[];for(var r in e)("constructor"!=r||!n&&S.call(e,r))&&t.push(r);return t}function le(e,n,t,r,a){e!==n&&ie(n,(function(i,c){if(a||(a=new K),Ee(i))!function(e,n,t,r,a,i,c){var s=be(e,t),u=be(n,t),l=c.get(u);if(l)return void X(e,t,l);var _=i?i(s,u,t+"",e,n,c):void 0,d=void 0===_;if(d){var f=ye(u),p=!f&&xe(u),m=!f&&!p&&Ae(u);_=u,f||p||m?ye(s)?_=s:Se(h=s)&&Oe(h)?_=function(e,n){var t=-1,r=e.length;n||(n=Array(r));for(;++t<r;)n[t]=e[t];return n}(s):p?(d=!1,_=function(e,n){if(n)return e.slice();var t=e.length,r=P?P(t):new e.constructor(t);return e.copy(r),r}(u,!0)):m?(d=!1,_=function(e,n){var t=n?function(e){var n=new e.constructor(e.byteLength);return new I(n).set(new I(e)),n}(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(u,!0)):_=[]:function(e){if(!Se(e)||oe(e)!=o)return!1;var n=U(e);if(null===n)return!0;var t=S.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&E.call(t)==N}(u)||je(u)?(_=s,je(s)?_=function(e){return function(e,n,t,r){var a=!t;t||(t={});var i=-1,o=n.length;for(;++i<o;){var c=n[i],s=r?r(t[c],e[c],c,t,e):void 0;void 0===s&&(s=e[c]),a?te(t,c,s):ee(t,c,s)}return t}(e,Ce(e))}(s):Ee(s)&&!we(s)||(_=function(e){return"function"!=typeof e.constructor||he(e)?{}:H(U(e))}(u))):d=!1}var h;d&&(c.set(u,_),a(_,u,r,i,c),c.delete(u));X(e,t,_)}(e,n,c,t,le,r,a);else{var s=r?r(be(e,c),i,c+"",e,n,a):void 0;void 0===s&&(s=i),X(e,c,s)}}),Ce)}function _e(e,n){return ve(function(e,n,t){return n=B(void 0===n?e.length-1:n,0),function(){for(var r=arguments,a=-1,i=B(r.length-n,0),o=Array(i);++a<i;)o[a]=r[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=r[a];return c[n]=t(o),g(e,this,c)}}(e,n,Te),e+"")}var de=F?function(e,n){return F(e,"toString",{configurable:!0,enumerable:!1,value:(t=n,function(){return t}),writable:!0});var t}:Te;function fe(e,n){var t=e.__data__;return function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?t["string"==typeof n?"string":"hash"]:t.map}function pe(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return se(t)?t:void 0}function me(e,n){var t=typeof e;return!!(n=null==n?r:n)&&("number"==t||"symbol"!=t&&s.test(e))&&e>-1&&e%1==0&&e<n}function he(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||w)}function be(e,n){if(("constructor"!==n||"function"!==typeof e[n])&&"__proto__"!=n)return e[n]}var ve=function(e){var n=0,t=0;return function(){var r=Z(),a=16-(r-t);if(t=r,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(de);function ge(e,n){return e===n||e!==e&&n!==n}var je=ce(function(){return arguments}())?ce:function(e){return Se(e)&&S.call(e,"callee")&&!L.call(e,"callee")},ye=Array.isArray;function Oe(e){return null!=e&&ke(e.length)&&!we(e)}var xe=q||function(){return!1};function we(e){if(!Ee(e))return!1;var n=oe(e);return n==i||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Ee(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Se(e){return null!=e&&"object"==typeof e}var Ae=v?function(e){return function(n){return e(n)}}(v):function(e){return Se(e)&&ke(e.length)&&!!u[oe(e)]};function Ce(e){return Oe(e)?Q(e,!0):ue(e)}var Ne,ze=(Ne=function(e,n,t){le(e,n,t)},_e((function(e,n){var t=-1,r=n.length,a=r>1?n[r-1]:void 0,i=r>2?n[2]:void 0;for(a=Ne.length>3&&"function"==typeof a?(r--,a):void 0,i&&function(e,n,t){if(!Ee(t))return!1;var r=typeof n;return!!("number"==r?Oe(t)&&me(n,t.length):"string"==r&&n in t)&&ge(t[n],e)}(n[0],n[1],i)&&(a=r<3?void 0:a,r=1),e=Object(e);++t<r;){var o=n[t];o&&Ne(e,o,t,a)}return e})));function Te(e){return e}e.exports=ze})),tt=(ie((function(e,n){var t="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",i="[object Function]",o="[object Object]",c=/^\[object .+?Constructor\]$/,s=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[a]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[i]=u["[object Map]"]=u["[object Number]"]=u[o]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var l="object"==typeof ae&&ae&&ae.Object===Object&&ae,_="object"==typeof self&&self&&self.Object===Object&&self,d=l||_||Function("return this")(),f=n&&!n.nodeType&&n,p=f&&e&&!e.nodeType&&e,m=p&&p.exports===f,h=m&&l.process,b=function(){try{var e=p&&p.require&&p.require("util").types;return e||h&&h.binding&&h.binding("util")}catch(n){}}(),v=b&&b.isTypedArray;function g(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}var j,y,O=Array.prototype,x=Function.prototype,w=Object.prototype,k=d["__core-js_shared__"],E=x.toString,S=w.hasOwnProperty,A=function(){var e=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),C=w.toString,N=E.call(Object),z=RegExp("^"+E.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=m?d.Buffer:void 0,M=d.Symbol,I=d.Uint8Array,P=T?T.allocUnsafe:void 0,U=(j=Object.getPrototypeOf,y=Object,function(e){return j(y(e))}),R=Object.create,L=w.propertyIsEnumerable,W=O.splice,D=M?M.toStringTag:void 0,F=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(n){}}(),q=T?T.isBuffer:void 0,B=Math.max,Z=Date.now,$=pe(d,"Map"),V=pe(Object,"create"),H=function(){function e(){}return function(n){if(!Ee(n))return{};if(R)return R(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();function J(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function G(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Y(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function K(e){var n=this.__data__=new G(e);this.size=n.size}function Q(e,n){var t=ye(e),r=!t&&je(e),a=!t&&!r&&xe(e),i=!t&&!r&&!a&&Ae(e),o=t||r||a||i,c=o?function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}(e.length,String):[],s=c.length;for(var u in e)!n&&!S.call(e,u)||o&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||me(u,s))||c.push(u);return c}function X(e,n,t){(void 0!==t&&!ge(e[n],t)||void 0===t&&!(n in e))&&te(e,n,t)}function ee(e,n,t){var r=e[n];S.call(e,n)&&ge(r,t)&&(void 0!==t||n in e)||te(e,n,t)}function ne(e,n){for(var t=e.length;t--;)if(ge(e[t][0],n))return t;return-1}function te(e,n,t){"__proto__"==n&&F?F(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}J.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},J.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},J.prototype.get=function(e){var n=this.__data__;if(V){var r=n[e];return r===t?void 0:r}return S.call(n,e)?n[e]:void 0},J.prototype.has=function(e){var n=this.__data__;return V?void 0!==n[e]:S.call(n,e)},J.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=V&&void 0===n?t:n,this},G.prototype.clear=function(){this.__data__=[],this.size=0},G.prototype.delete=function(e){var n=this.__data__,t=ne(n,e);return!(t<0)&&(t==n.length-1?n.pop():W.call(n,t,1),--this.size,!0)},G.prototype.get=function(e){var n=this.__data__,t=ne(n,e);return t<0?void 0:n[t][1]},G.prototype.has=function(e){return ne(this.__data__,e)>-1},G.prototype.set=function(e,n){var t=this.__data__,r=ne(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new($||G),string:new J}},Y.prototype.delete=function(e){var n=fe(this,e).delete(e);return this.size-=n?1:0,n},Y.prototype.get=function(e){return fe(this,e).get(e)},Y.prototype.has=function(e){return fe(this,e).has(e)},Y.prototype.set=function(e,n){var t=fe(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},K.prototype.clear=function(){this.__data__=new G,this.size=0},K.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},K.prototype.get=function(e){return this.__data__.get(e)},K.prototype.has=function(e){return this.__data__.has(e)},K.prototype.set=function(e,n){var t=this.__data__;if(t instanceof G){var r=t.__data__;if(!$||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Y(r)}return t.set(e,n),this.size=t.size,this};var re,ie=function(e,n,t){for(var r=-1,a=Object(e),i=t(e),o=i.length;o--;){var c=i[re?o:++r];if(!1===n(a[c],c,a))break}return e};function oe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":D&&D in Object(e)?function(e){var n=S.call(e,D),t=e[D];try{e[D]=void 0;var r=!0}catch(i){}var a=C.call(e);r&&(n?e[D]=t:delete e[D]);return a}(e):function(e){return C.call(e)}(e)}function ce(e){return Se(e)&&oe(e)==a}function se(e){return!(!Ee(e)||function(e){return!!A&&A in e}(e))&&(we(e)?z:c).test(function(e){if(null!=e){try{return E.call(e)}catch(n){}try{return e+""}catch(n){}}return""}(e))}function ue(e){if(!Ee(e))return function(e){var n=[];if(null!=e)for(var t in Object(e))n.push(t);return n}(e);var n=he(e),t=[];for(var r in e)("constructor"!=r||!n&&S.call(e,r))&&t.push(r);return t}function le(e,n,t,r,a){e!==n&&ie(n,(function(i,c){if(a||(a=new K),Ee(i))!function(e,n,t,r,a,i,c){var s=be(e,t),u=be(n,t),l=c.get(u);if(l)return void X(e,t,l);var _=i?i(s,u,t+"",e,n,c):void 0,d=void 0===_;if(d){var f=ye(u),p=!f&&xe(u),m=!f&&!p&&Ae(u);_=u,f||p||m?ye(s)?_=s:Se(h=s)&&Oe(h)?_=function(e,n){var t=-1,r=e.length;n||(n=Array(r));for(;++t<r;)n[t]=e[t];return n}(s):p?(d=!1,_=function(e,n){if(n)return e.slice();var t=e.length,r=P?P(t):new e.constructor(t);return e.copy(r),r}(u,!0)):m?(d=!1,_=function(e,n){var t=n?function(e){var n=new e.constructor(e.byteLength);return new I(n).set(new I(e)),n}(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(u,!0)):_=[]:function(e){if(!Se(e)||oe(e)!=o)return!1;var n=U(e);if(null===n)return!0;var t=S.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&E.call(t)==N}(u)||je(u)?(_=s,je(s)?_=function(e){return function(e,n,t,r){var a=!t;t||(t={});var i=-1,o=n.length;for(;++i<o;){var c=n[i],s=r?r(t[c],e[c],c,t,e):void 0;void 0===s&&(s=e[c]),a?te(t,c,s):ee(t,c,s)}return t}(e,Ce(e))}(s):Ee(s)&&!we(s)||(_=function(e){return"function"!=typeof e.constructor||he(e)?{}:H(U(e))}(u))):d=!1}var h;d&&(c.set(u,_),a(_,u,r,i,c),c.delete(u));X(e,t,_)}(e,n,c,t,le,r,a);else{var s=r?r(be(e,c),i,c+"",e,n,a):void 0;void 0===s&&(s=i),X(e,c,s)}}),Ce)}function _e(e,n){return ve(function(e,n,t){return n=B(void 0===n?e.length-1:n,0),function(){for(var r=arguments,a=-1,i=B(r.length-n,0),o=Array(i);++a<i;)o[a]=r[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=r[a];return c[n]=t(o),g(e,this,c)}}(e,n,Te),e+"")}var de=F?function(e,n){return F(e,"toString",{configurable:!0,enumerable:!1,value:(t=n,function(){return t}),writable:!0});var t}:Te;function fe(e,n){var t=e.__data__;return function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?t["string"==typeof n?"string":"hash"]:t.map}function pe(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return se(t)?t:void 0}function me(e,n){var t=typeof e;return!!(n=null==n?r:n)&&("number"==t||"symbol"!=t&&s.test(e))&&e>-1&&e%1==0&&e<n}function he(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||w)}function be(e,n){if(("constructor"!==n||"function"!==typeof e[n])&&"__proto__"!=n)return e[n]}var ve=function(e){var n=0,t=0;return function(){var r=Z(),a=16-(r-t);if(t=r,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(de);function ge(e,n){return e===n||e!==e&&n!==n}var je=ce(function(){return arguments}())?ce:function(e){return Se(e)&&S.call(e,"callee")&&!L.call(e,"callee")},ye=Array.isArray;function Oe(e){return null!=e&&ke(e.length)&&!we(e)}var xe=q||function(){return!1};function we(e){if(!Ee(e))return!1;var n=oe(e);return n==i||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Ee(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Se(e){return null!=e&&"object"==typeof e}var Ae=v?function(e){return function(n){return e(n)}}(v):function(e){return Se(e)&&ke(e.length)&&!!u[oe(e)]};function Ce(e){return Oe(e)?Q(e,!0):ue(e)}var Ne,ze=(Ne=function(e,n,t,r){le(e,n,t,r)},_e((function(e,n){var t=-1,r=n.length,a=r>1?n[r-1]:void 0,i=r>2?n[2]:void 0;for(a=Ne.length>3&&"function"==typeof a?(r--,a):void 0,i&&function(e,n,t){if(!Ee(t))return!1;var r=typeof n;return!!("number"==r?Oe(t)&&me(n,t.length):"string"==r&&n in t)&&ge(t[n],e)}(n[0],n[1],i)&&(a=r<3?void 0:a,r=1),e=Object(e);++t<r;){var o=n[t];o&&Ne(e,o,t,a)}return e})));function Te(e){return e}e.exports=ze})),function(e){void 0===e&&(e={});var n=Object(l.b)(),t=Object(s.useState)({}),r=t[0],a=t[1],i=Object(s.useState)(),o=i[0],c=i[1],u=Object.values(r).map((function(e){return e.occupancy})).reduce((function(e,n){return e+n}),0),_=Object(s.useCallback)((function(){return p(void 0,void 0,void 0,(function(){var t,r;return m(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.hereNow(e)];case 1:return t=i.sent(),a(t.channels),[3,3];case 2:return r=i.sent(),c(r),[3,3];case 3:return[2]}}))}))}),[n,JSON.stringify(e)]),d=Object(s.useCallback)((function(n){a((function(t){var r=ce(t);r[n.channel]||(r[n.channel]={name:n.channel,occupancy:0,occupants:[]});var a=r[n.channel];if("join"===n.action&&(a.hasOwnProperty("occupants")||(a.occupants=[]),a.occupancy=n.occupancy,!1!==e.includeUUIDs&&a.hasOwnProperty("occupants")&&!a.occupants.find((function(e){return e.uuid==n.uuid})))){var i=n.state,o=n.uuid;a.occupants.push({state:i,uuid:o})}return["leave","timeout"].includes(n.action)&&(a.occupancy=n.occupancy,!1!==e.includeUUIDs&&a.hasOwnProperty("occupants")&&a.occupants.find((function(e){return e.uuid==n.uuid}))&&(r[n.channel].occupants=a.occupants.filter((function(e){return e.uuid!==n.uuid})))),r}))}),[e.includeUUIDs]);return Object(s.useEffect)((function(){n.addListener({presence:d})}),[d,n]),Object(s.useEffect)((function(){a({}),c(null),_()}),[_]),[r,_,u,o]}),rt=function(e){void 0===e&&(e={});var n=Object(l.b)(),t=Object(s.useState)(null),r=t[0],a=t[1],i=Object(s.useState)(),o=i[0],c=i[1],u=function(e){var n=e.message;"uuid"===n.type&&a((function(e){var t=ce(e);return n.data.id==e.id&&Object.assign(t,n.data),t}))};return Object(s.useEffect)((function(){n.addListener({objects:u}),p(void 0,void 0,void 0,(function(){var t,r;return m(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.objects.getUUIDMetadata(e)];case 1:return t=i.sent(),a(t.data),[3,3];case 2:return r=i.sent(),c(r),[3,3];case 3:return[2]}}))}))}),[]),[r,o]},at=function(e){void 0===e&&(e={});var n=Object(l.b)(),t=Object(s.useState)([]),r=t[0],a=t[1],i=Object(s.useState)(0),o=i[0],c=i[1],u=Object(s.useState)(""),_=u[0],d=u[1],f=Object(s.useState)(),b=f[0],v=f[1],g=nt({},e,{page:{next:_},include:{totalCount:!0}}),j=function(){return p(void 0,void 0,void 0,(function(){var e,t;return m(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),o&&r.length>=o?[2]:[4,n.objects.getAllUUIDMetadata(g)];case 1:return e=i.sent(),a((function(n){return h(h([],n,!0),e.data,!0)})),c(e.totalCount),d(e.next),[3,3];case 2:return t=i.sent(),v(t),[3,3];case 3:return[2]}}))}))},y=function(e){var n=e.message;"uuid"===n.type&&a((function(e){var t=ce(e),r=t.find((function(e){return e.id===n.data.id}));return r&&"set"===n.event&&Object.assign(r,n.data),r&&"delete"===n.event&&t.splice(t.indexOf(r),1),t}))};return Object(s.useEffect)((function(){n.addListener({objects:y}),j()}),[]),[r,j,o,b]},it=function(e){void 0===e&&(e={});var n=Object(l.b)(),t=Object(s.useState)([]),r=t[0],a=t[1],i=Object(s.useState)(""),o=i[0],c=i[1],u=Object(s.useState)(0),_=u[0],d=u[1],f=Object(s.useState)(),b=f[0],v=f[1],g=nt({},e,{page:{next:o},include:{totalCount:!0}}),j=function(){return p(void 0,void 0,void 0,(function(){var e,t;return m(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),_&&r.length>=_?[2]:[4,n.objects.getAllChannelMetadata(g)];case 1:return e=i.sent(),a((function(n){return h(h([],n,!0),e.data,!0)})),d(e.totalCount),c(e.next),[3,3];case 2:return t=i.sent(),v(t),[3,3];case 3:return[2]}}))}))},y=function(e){var n=e.message;"channel"===n.type&&a((function(t){var r=ce(t),a=r.find((function(n){return n.id===e.channel}));return a&&"set"===n.event&&Object.assign(a,n.data),a&&"delete"===n.event&&r.splice(r.indexOf(a),1),r}))};return Object(s.useEffect)((function(){n.addListener({objects:y}),j()}),[]),[r,j,_,b]},ot=function(e){var n=JSON.stringify(e),t=Object(l.b)(),r=Object(s.useState)([]),a=r[0],i=r[1],o=Object(s.useState)(0),c=o[0],u=o[1],_=Object(s.useState)(""),d=_[0],f=_[1],b=Object(s.useState)(),v=b[0],g=b[1],j=Object(s.useState)(!0),y=j[0],O=j[1],x=Object(s.useState)(!1),w=x[0],k=x[1],E=Object(s.useMemo)((function(){return nt({},JSON.parse(n),{page:{next:d},include:{totalCount:!0}})}),[d,n]),S=function(){i([]),u(0),f(""),g(void 0),O(!0)},A=Object(s.useCallback)((function(){return p(void 0,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:O(!1),k(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),c&&a.length>=c?[2]:[4,t.objects.getChannelMembers(E)];case 2:return e=r.sent(),i((function(n){return h(h([],n,!0),e.data.map((function(e){return e.uuid})),!0)})),u(e.totalCount),f(e.next),[3,5];case 3:return n=r.sent(),g(n),[3,5];case 4:return k(!1),[7];case 5:return[2]}}))}))}),[t,E,a.length,c]),C=function(n){var t=n.message;"membership"===t.type&&i((function(n){var r=ce(n),a=r.find((function(e){return e.id===t.data.uuid.id}));return t.data.channel!==e.channel||a&&"delete"===t.event&&r.splice(r.indexOf(a),1),r}))};return Object(s.useEffect)((function(){t.addListener({objects:C})}),[t]),Object(s.useEffect)((function(){S()}),[n]),Object(s.useEffect)((function(){i([]),u(0),f("")}),[e.channel]),Object(s.useEffect)((function(){y&&!w&&A()}),[y,w,A]),[a,A,S,c,v]},ct=function(e){void 0===e&&(e={});var n=JSON.stringify(e),t=Object(l.b)(),r=Object(s.useState)([]),a=r[0],i=r[1],o=Object(s.useState)(0),c=o[0],u=o[1],_=Object(s.useState)(""),d=_[0],f=_[1],b=Object(s.useState)(),v=b[0],g=b[1],j=Object(s.useState)(!0),y=j[0],O=j[1],x=Object(s.useState)(!1),w=x[0],k=x[1],E=Object(s.useMemo)((function(){return nt({},JSON.parse(n),{page:{next:d},include:{totalCount:!0}})}),[d,n]),S=function(){i([]),u(0),f(""),g(void 0),O(!0)},A=Object(s.useCallback)((function(){return p(void 0,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:O(!1),k(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),c&&a.length>=c?[2]:[4,t.objects.getMemberships(E)];case 2:return e=r.sent(),i((function(n){return h(h([],n,!0),e.data.map((function(e){return e.channel})),!0)})),u(e.totalCount),f(e.next),[3,5];case 3:return n=r.sent(),g(n),[3,5];case 4:return k(!1),[7];case 5:return[2]}}))}))}),[t,E,a.length,c]),C=function(n){var r=n.message;"membership"===r.type&&i((function(n){var a=ce(n),i=a.find((function(e){return e.id===r.data.channel.id})),o=e.uuid||t.getUUID();return r.data.uuid.id!==o||i&&"delete"===r.event&&a.splice(a.indexOf(i),1),a}))};return Object(s.useEffect)((function(){t.addListener({objects:C})}),[t]),Object(s.useEffect)((function(){S()}),[n]),Object(s.useEffect)((function(){y&&!w&&A()}),[y,w,A]),[a,A,S,c,v]}}).call(this,t(41),t(34))},48:function(e){e.exports=JSON.parse('[{"timetoken":"161673695571766362","channel":"space.bc03548bcb11eb8dcd0242c1303","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"The weather is gorgeous today. Who\'s available to meet up for lunch at Bob\u2019s Diner? \ud83c\udf1e","attachments":[{"type":"image","image":{"source":"https://pubnub.github.io/react-chat-components/samples/clouds.jpg"}}]}},{"timetoken":"161673697571766362","channel":"space.bc03548bcb11eb8dcd0242c1303","uuid":"user_63ea15931d8541a3bd35e5b1f09087dc","actions":{},"message":{"type":"welcome","text":"Yes. Count me in. What time should we meet?"}},{"timetoken":"161673698571766362","channel":"space.bc03548bcb11eb8dcd0242c1303","uuid":"user_47557ad75d4047efab1b6577cec3efe7","actions":{},"message":{"type":"welcome","text":"Does noon work for everyone?"}},{"timetoken":"161673699571766362","channel":"space.bc03548bcb11eb8dcd0242c1303","uuid":"user_63ea15931d8541a3bd35e5b1f09087dc","actions":{},"message":{"type":"welcome","text":"Noon is perfect!"}},{"timetoken":"161673700571766362","channel":"space.bc03548bcb11eb8dcd0242c1303","uuid":"user_142da3c419804a82a3057cedc86acaa6","actions":{},"message":{"type":"welcome","text":"Awesome, see you all then!"}},{"timetoken":"16166852571766367","channel":"space.937989646abaa2bf3ed12dbd0a3","uuid":"user_4e2f18aba20640cf922c8bc485941f8e","actions":{},"message":{"type":"welcome","text":"Hi, are you going to practice? \u26bd"}},{"timetoken":"16166853571766368","channel":"space.937989646abaa2bf3ed12dbd0a3","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"Yes, do you need a ride?"}},{"timetoken":"16166854571766369","channel":"space.937989646abaa2bf3ed12dbd0a3","uuid":"user_4e2f18aba20640cf922c8bc485941f8e","actions":{},"message":{"type":"welcome","text":"Yes, thank you. You\u2019re the best!"}},{"timetoken":"16166855571766370","channel":"space.937989646abaa2bf3ed12dbd0a3","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"I\u2019ll pick you up in an hour. Don\u2019t forget your cleats!"}},{"timetoken":"16167852571766371","channel":"space.5f3547a18f448e567e84ba097db","uuid":"Mom","actions":{},"message":{"type":"welcome","text":"Hey! Have you tried the new restaurant in town? I\u2019ve been meaning to stop by and wanted to get your thoughts.","sender":{"profileUrl":"https://randomuser.me/api/portraits/women/58.jpg","id":"Mom"}}},{"timetoken":"16167853571766372","channel":"space.5f3547a18f448e567e84ba097db","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"Yes, they have great food!"}},{"timetoken":"16167854571766373","channel":"space.5f3547a18f448e567e84ba097db","uuid":"Dad","actions":{},"message":{"type":"welcome","text":"What do you recommend?","sender":{"profileUrl":"https://randomuser.me/api/portraits/men/93.jpg","id":"Dad"}}},{"timetoken":"16167855571766374","channel":"space.5f3547a18f448e567e84ba097db","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"I really enjoyed the pizza.","attachments":[{"type":"image","image":{"source":"https://pubnub.github.io/react-chat-components/samples/pizza.jpg"}}]}},{"timetoken":"16167857571766375","channel":"space.5f3547a18f448e567e84ba097db","uuid":"Mom","actions":{},"message":{"type":"welcome","text":"Nice! We will have to try it.","sender":{"profileUrl":"https://randomuser.me/api/portraits/women/58.jpg","id":"Mom"}}},{"timetoken":"161673657571766376","channel":"space.515fc9a2a1b043c3847a29f29f3b3c2a","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"Hi Victoria, have you had a chance to review my notes from the meeting?"}},{"timetoken":"161673659571766377","channel":"space.515fc9a2a1b043c3847a29f29f3b3c2a","uuid":"user_142da3c419804a82a3057cedc86acaa6","actions":{},"message":{"type":"welcome","text":"Hey, thank you for the reminder. I will take a look at them now."}},{"timetoken":"161673660571766378","channel":"space.515fc9a2a1b043c3847a29f29f3b3c2a","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"Wonderful! Should we schedule a quick meeting to go over the new action items?"}},{"timetoken":"161673662571766379","channel":"space.515fc9a2a1b043c3847a29f29f3b3c2a","uuid":"user_142da3c419804a82a3057cedc86acaa6","actions":{},"message":{"type":"welcome","text":"Yes, that\u2019s a great idea. Sending you a calendar invite. \ud83d\udc4d ","attachments":[{"type":"link","title":"Real-Time In-App Chat and Communication Platform","description":"Leverage the power of hosted real-time APIs to build engaging remote experiences using in-app chat, push notifications, location tracking and more.","provider":{"url":"https://www.pubnub.com/","name":"PubNub"},"icon":{"source":"https://www.pubnub.com/images/favicon.png"},"image":{"source":"https://images.ctfassets.net/3prze68gbwl1/3roUbsKJAysxW6gUUxczrY/89eeaa8940ccf2ed10b348adaca99b64/pubnub-powered-apps.png"}}]}},{"timetoken":"161673757571766376","channel":"space.efc5b3ef96ea4bffbde733e249c8cbb3","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"Lol yeah"}},{"timetoken":"161673759571766376","channel":"space.efc5b3ef96ea4bffbde733e249c8cbb3","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"You could have shouted, but no one would believes you"}},{"timetoken":"161673760571766376","channel":"space.efc5b3ef96ea4bffbde733e249c8cbb3","uuid":"user_efc5b3ef96ea4bffbde733e249c8cbb3","actions":{},"message":{"type":"welcome","text":"Sure haha"}},{"timetoken":"161673762571766376","channel":"space.efc5b3ef96ea4bffbde733e249c8cbb3","uuid":"user_efc5b3ef96ea4bffbde733e249c8cbb3","actions":{},"message":{"type":"welcome","text":"Order on Wenser\u2019s page. This one\u2019s on me."}},{"timetoken":"161673763571766376","channel":"space.efc5b3ef96ea4bffbde733e249c8cbb3","uuid":"current_user","actions":{},"message":{"type":"welcome","text":"Thank you"}},{"timetoken":"161673765571766376","channel":"space.efc5b3ef96ea4bffbde733e249c8cbb3","uuid":"user_efc5b3ef96ea4bffbde733e249c8cbb3","actions":{},"message":{"type":"welcome","text":"No problem :)"}}]')},49:function(e){e.exports=JSON.parse('[{"name":"Besties","custom":{"thumb":"https://www.gravatar.com/avatar/bc03548bcb11eb8dcd0242c1303?s=256&d=identicon"},"description":"Gossips, gossips","eTag":"AbOx6N+6vu3zoAE","id":"space.bc03548bcb11eb8dcd0242c1303","updated":"2020-09-23T09:23:37.175764Z"},{"name":"Family","custom":{"thumb":"https://www.gravatar.com/avatar/5f3547a18f448e567e84ba097db?s=256&d=identicon"},"description":"Everything about the family","eTag":"AbOx6N+6vu3zoAE","id":"space.5f3547a18f448e567e84ba097db","updated":"2020-09-23T09:23:37.175764Z"},{"name":"Soccer Practice","custom":{"thumb":"https://www.gravatar.com/avatar/937989646abaa2bf3ed12dbd0a3?s=256&d=identicon"},"description":"Discuss soccer related matters","eTag":"AbOx6N+6vu3zoAE","id":"space.937989646abaa2bf3ed12dbd0a3","updated":"2020-09-23T09:23:37.175764Z"}]')},50:function(e){e.exports=JSON.parse('[{"name":"Victoria","custom":{"thumb":"https://randomuser.me/api/portraits/women/4.jpg"},"description":"Direct chat with Victoria","eTag":"AbOx6N+6vu3zoAE","id":"space.515fc9a2a1b043c3847a29f29f3b3c2a","updated":"2020-09-23T09:23:37.175764Z"},{"name":"Ellen","custom":{"thumb":"https://randomuser.me/api/portraits/women/8.jpg"},"description":"Direct chat with Ellen","eTag":"AbOx6N+6vu3zoAE","id":"space.efc5b3ef96ea4bffbde733e249c8cbb3","updated":"2020-09-23T09:23:37.175764Z"}]')},51:function(e){e.exports=JSON.parse('{"publishKey":"pub-c-e087e539-bb0c-4d15-91c9-aa83a5e975f8","subscribeKey":"sub-c-a15882e8-3185-11ec-bb3f-f27e7ede0273"}')},67:function(e,n,t){},69:function(e,n,t){},70:function(e,n,t){},72:function(e,n,t){},73:function(e,n,t){},79:function(e,n,t){"use strict";t.r(n);var r,a,i=t(21),o=t(0),c=t.n(o),s=t(43),u=t.n(s),l=t(44),_=t.n(l),d=t(6),f=t(32),p=t(9),m=t(3),h=t(15),b=t(26),v=t(46),g=t.n(v),j=t(4);t(67),t(42);function y(){return y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},y.apply(this,arguments)}function O(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function x(e,n){var t=e.title,i=e.titleId,c=O(e,["title","titleId"]);return o.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24,ref:n,"aria-labelledby":i},c),t?o.createElement("title",{id:i},t):null,r||(r=o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.5 8a5.5 5.5 0 118.596 4.547 9.005 9.005 0 015.9 8.18.75.75 0 01-1.5.045 7.5 7.5 0 00-14.993 0 .75.75 0 01-1.499-.044 9.005 9.005 0 015.9-8.181A5.494 5.494 0 013.5 8zM9 4a4 4 0 100 8 4 4 0 000-8z"})),a||(a=o.createElement("path",{fill:"currentColor",d:"M17.29 8c-.148 0-.292.01-.434.03a.75.75 0 11-.212-1.484 4.53 4.53 0 013.38 8.097 6.69 6.69 0 013.956 6.107.75.75 0 01-1.5 0 5.193 5.193 0 00-3.696-4.972l-.534-.16v-1.676l.41-.209A3.03 3.03 0 0017.29 8z"})))}var w=o.forwardRef(x),k=(t.p,t(29)),E=t(48),S=t(49),A=t(50),C=t(1),N=k,z=S,T=A,M=[].concat(Object(h.a)(z),Object(h.a)(T)).map((function(e){return e.id}));var I=function(){var e,n,t,r=Object(d.b)(),a=Object(o.useState)("light"),i=Object(m.a)(a,2),c=i[0],s=i[1],u=Object(o.useState)(!1),l=Object(m.a)(u,2),_=l[0],f=l[1],p=Object(o.useState)(!0),v=Object(m.a)(p,2),y=v[0],O=v[1],x=Object(o.useState)({}),k=Object(m.a)(x,2),S=k[0],A=k[1],I=Object(j.k)({channels:M}),P=Object(m.a)(I,1)[0],U=Object(o.useState)(z[0]),R=Object(m.a)(U,2),L=R[0],W=R[1],D=null===(e=P[L.id])||void 0===e||null===(n=e.occupants)||void 0===n?void 0:n.map((function(e){return e.uuid})),F=N.filter((function(e){return null===D||void 0===D?void 0:D.includes(e.id)})),q=N.find((function(e){return e.id===r.getUUID()}));return Object(o.useEffect)((function(){var e={};Object(h.a)(E).forEach((function(n){e.hasOwnProperty(n.channel)||(e[n.channel]=[]),"current_user"===n.uuid&&(null===q||void 0===q?void 0:q.id)&&(n.uuid=null===q||void 0===q?void 0:q.id),e[n.channel].push(n)})),A(e)}),[q]),Object(C.jsx)("div",{className:"app-simple ".concat(c),children:Object(C.jsxs)(j.b,{theme:c,users:N,currentChannel:L.id,channels:M,children:[Object(C.jsxs)("div",{className:"channels ".concat(y&&"shown"),children:[Object(C.jsxs)("div",{className:"user",children:[(null===q||void 0===q?void 0:q.profileUrl)&&Object(C.jsx)("img",{src:null===q||void 0===q?void 0:q.profileUrl,alt:"User avatar "}),Object(C.jsxs)("h4",{children:[null===q||void 0===q?void 0:q.name," ",Object(C.jsx)("span",{className:"close",onClick:function(){return O(!1)},children:"\u2715"})]})]}),Object(C.jsx)("h4",{children:"Channels"}),Object(C.jsx)("div",{children:Object(C.jsx)(j.a,{channels:z,onChannelSwitched:function(e){return W(e)}})}),Object(C.jsx)("h4",{children:"Direct Chats"}),Object(C.jsx)("div",{children:Object(C.jsx)(j.a,{channels:T,onChannelSwitched:function(e){return W(e)}})}),Object(C.jsxs)("div",{className:"toggle",children:[Object(C.jsx)("span",{children:"Dark Mode"}),Object(C.jsx)(g.a,{size:50,checked:"dark"===c,onChange:function(e){return s(e?"dark":"light")}})]})]}),Object(C.jsxs)("div",{className:"chat",children:[Object(C.jsxs)("div",{className:"people ".concat(_?"active":""),onClick:function(){return f(!_)},children:[Object(C.jsx)("span",{children:(null===(t=P[L.id])||void 0===t?void 0:t.occupancy)||0}),Object(C.jsx)(w,{})]}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("span",{className:"hamburger",onClick:function(){return O(!0)},children:"\u2630"}),Object(C.jsx)("h4",{children:L.name}),Object(C.jsx)("small",{children:L.description}),Object(C.jsx)("hr",{})]}),Object(C.jsx)(j.e,{fetchMessages:0,welcomeMessages:S[L.id],enableReactions:!0,reactionsPicker:Object(C.jsx)(b.a,{}),children:Object(C.jsx)(j.f,{showAsMessage:!0})}),Object(C.jsx)("hr",{}),Object(C.jsx)(j.d,{typingIndicator:!0,fileUpload:"all",emojiPicker:Object(C.jsx)(b.a,{})})]}),Object(C.jsxs)("div",{className:"members ".concat(_&&"shown"),children:[Object(C.jsxs)("h4",{children:["Online Users",Object(C.jsx)("span",{className:"close",onClick:function(){return f(!1)},children:"\u2715"})]}),Object(C.jsx)(j.c,{members:F})]})]})})},P=(t(69),["polsatgames2","izakooo","dota2ruhub"]);var U=function(){var e=c.a.useState(P[0]),n=Object(m.a)(e,2),t=n[0],r=n[1],a=Object(j.l)(),i=Object(m.a)(a,1)[0],o=Object(j.k)({channels:[t]}),s=Object(m.a)(o,2),u=(s[0],s[1]);return Object(C.jsx)("div",{className:"app-event",children:Object(C.jsxs)(j.b,{currentChannel:t,theme:"event-dark",users:[i],children:[Object(C.jsxs)("div",{className:"main",children:[Object(C.jsxs)("div",{className:"channels",children:["Join a channel:",P.map((function(e){return Object(C.jsx)("span",{className:"link",onClick:function(){return r(e)},children:e},e)}))]}),Object(C.jsx)("div",{className:"event",children:Object(C.jsx)("iframe",{src:"https://player.twitch.tv/?channel=".concat(t,"&parent=localhost"),frameBorder:"0",allowFullScreen:!0,scrolling:"no",title:"Stream"})}),Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("div",{className:"avatar"}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:t}),Object(C.jsx)("small",{children:"Additional channel info"})]})]}),Object(C.jsxs)("div",{className:"text",children:[Object(C.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}),Object(C.jsx)("p",{children:"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet."}),Object(C.jsx)("p",{children:'Consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"'})]})]}),Object(C.jsxs)("div",{className:"chat",children:[Object(C.jsxs)("div",{className:"people",children:[Object(C.jsxs)("span",{children:["Logged in as: ",null===i||void 0===i?void 0:i.name]}),Object(C.jsxs)("span",{children:[u," ",Object(C.jsx)(w,{})]})]}),Object(C.jsx)(j.e,{welcomeMessages:!1}),Object(C.jsx)(j.d,{hideSendButton:!0,senderInfo:!0})]})]})})};t(70);var R=function(){var e=c.a.useState("space.ac4e67b98b34b44c4a39466e93e"),n=Object(m.a)(e,2),t=n[0],r=n[1],a=c.a.useState(!1),i=Object(m.a)(a,2),o=i[0],s=i[1],u=Object(j.n)({include:{customFields:!0}}),l=Object(m.a)(u,1)[0],_=Object(j.j)({include:{customFields:!0}}),d=Object(m.a)(_,1)[0],f=Object(j.i)({channel:t,include:{customUUIDFields:!0}}),p=Object(m.a)(f,1)[0],h=Object(j.k)({channels:[t]}),b=Object(m.a)(h,2),v=(b[0],b[1]);return Object(C.jsx)("div",{className:"app-group",children:Object(C.jsxs)(j.b,{theme:"dark",currentChannel:t,users:l,children:[Object(C.jsx)("div",{className:"channels",children:Object(C.jsx)(j.a,{channels:d,onChannelSwitched:function(e){r(e.id)}})}),Object(C.jsxs)("div",{className:"chat",children:[Object(C.jsxs)("div",{className:"people ".concat(o?"active":""),onClick:function(){return s(!o)},children:[Object(C.jsxs)("span",{children:[v||0," / ",p.length||0]}),Object(C.jsx)(w,{})]}),Object(C.jsx)(j.e,{fetchMessages:10,children:Object(C.jsx)(j.f,{showAsMessage:!0})}),Object(C.jsx)(j.d,{typingIndicator:!0})]}),Object(C.jsx)("div",{className:"members ".concat(o&&"shown"),children:Object(C.jsx)(j.c,{members:p})})]})})},L=t(18),W=t.n(L),D=t(20),F=function(e){var n=e.users,t=e.currentUser,r=e.setCurrentChannel,a=e.hideModal,c=Object(d.b)(),s=Object(o.useState)(!1),u=Object(m.a)(s,2),l=u[0],_=u[1],f=Object(o.useState)(!1),p=Object(m.a)(f,2),b=p[0],v=p[1],g=Object(o.useState)([]),y=Object(m.a)(g,2),O=y[0],x=y[1],w=Object(o.useState)(""),k=Object(m.a)(w,2),E=k[0],S=k[1],A=Object(o.useState)(""),N=Object(m.a)(A,2),z=N[0],T=N[1],M=function(e){x((function(n){return n.find((function(n){return n.id===e.id}))?n.filter((function(n){return n.id!==e.id})):[].concat(Object(h.a)(n),[e])}))},I=function(){var e=Object(D.a)(W.a.mark((function e(n){var o,s,u,d,f,p,m,b,v;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return _(!0),f=Object(h.a)(Array(27)).map((function(){return Math.floor(16*Math.random()).toString(16)})).join(""),p={thumb:"https://www.gravatar.com/avatar/".concat(f,"?s=256&d=identicon")},n?(o=(m=[t,n]).map((function(e){return e.id})).sort(),s="direct.".concat(o.join("@")),d={name:m.map((function(e){return e.name})).sort().join(" and "),custom:p},u={name:n.name,custom:{thumb:n.profileUrl}}):(b=[t].concat(Object(h.a)(O)),o=b.map((function(e){return e.id})).sort(),s="group.".concat(f),v=z||b.map((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.split(" ")[0]})).sort().join(", "),u=d={name:v,custom:p}),e.next=8,c.objects.setChannelMetadata({channel:s,data:d});case 8:return e.next=10,c.objects.setChannelMembers({channel:s,uuids:o});case 10:r(Object(i.a)({id:s},u)),a(),_(!1);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"overlay",children:Object(C.jsxs)("div",{className:"modal create-chat-modal",children:[Object(C.jsxs)("div",{className:"header",children:[b&&Object(C.jsx)("button",{className:"material-icons-outlined",onClick:function(){return v(!1)},children:"chevron_left"}),Object(C.jsx)("strong",{children:"New chat"}),Object(C.jsx)("button",{className:"material-icons-outlined",onClick:function(){return a()},children:"close"})]}),Object(C.jsxs)("div",{className:"filter-input",children:[Object(C.jsx)("input",{onChange:function(e){return S(e.target.value)},placeholder:"Search in users",type:"text",value:E}),Object(C.jsx)("i",{className:"material-icons-outlined",children:"search"})]}),b?Object(C.jsx)("input",{className:"large",onChange:function(e){return T(e.target.value)},placeholder:"Group chat name (optional)",type:"text",value:z}):Object(C.jsxs)("button",{className:"group-button",onClick:function(){return v(!0)},children:[Object(C.jsx)("i",{className:"material-icons-outlined",children:"people"}),Object(C.jsx)("p",{children:"New group chat"}),Object(C.jsx)("i",{className:"material-icons-outlined",children:"chevron_right"})]}),Object(C.jsx)("h2",{children:"Users"}),Object(C.jsx)(j.c,{members:n.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(E)})),onMemberClicked:function(e){return I(e)},memberRenderer:b?function(e){return q({user:e,selectedUsers:O,handleCheck:M})}:void 0}),!!O.length&&Object(C.jsx)("div",{className:"footer",children:Object(C.jsx)("button",{disabled:l,onClick:function(){return I()},children:"Create group chat"})})]})})},q=function(e){var n,t=e.user,r=e.selectedUsers,a=e.handleCheck,i=r.find((function(e){return e.id===t.id}));return Object(C.jsxs)("div",{className:"pn-member",onClick:function(){return a(t)},children:[Object(C.jsx)("div",{className:"pn-member__avatar",style:{backgroundColor:Object(j.h)(t.id)},children:t.profileUrl?Object(C.jsx)("img",{src:t.profileUrl,alt:"User avatar"}):Object(j.g)(t.name||t.id)}),Object(C.jsxs)("div",{className:"pn-member__main",children:[Object(C.jsx)("p",{className:"pn-member__name",children:t.name}),Object(C.jsx)("p",{className:"pn-member__title",children:null===(n=t.custom)||void 0===n?void 0:n.title})]}),Object(C.jsx)("div",{className:"check-icon ".concat(i&&"checked"),children:i&&Object(C.jsx)("i",{className:"material-icons-outlined",children:"check"})})]},t.id)},B=function(e){var n=e.currentUser,t=e.reportedMessage,r=e.hideModal,a=(e.users,Object(d.b)()),c=Object(o.useState)(!1),s=Object(m.a)(c,2),u=s[0],l=s[1],_=(null===t||void 0===t?void 0:t.uuid)||(null===t||void 0===t?void 0:t.publisher)||"",f=function(){var e=Object(D.a)(W.a.mark((function e(r){var o,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,a.objects.getUUIDMetadata({uuid:_,include:{customFields:!0}});case 5:return o=e.sent,c=o.data.custom,e.next=9,a.objects.setUUIDMetadata({uuid:_,data:{custom:Object(i.a)(Object(i.a)({},c),{},{flag:!0,flaggedAt:Date.now(),flaggedBy:"".concat(n.name," (").concat(n.id,")"),reason:r})}});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"overlay",children:Object(C.jsxs)("div",{className:"modal report-user-modal",children:[Object(C.jsxs)("div",{className:"header",children:[Object(C.jsx)("strong",{children:u?"Thank you for letting us know":"Report user"}),Object(C.jsx)("button",{className:"material-icons-outlined",onClick:function(){r(),l(!1)},children:"close"})]}),u?Object(C.jsxs)("div",{className:"center",children:[Object(C.jsx)("i",{className:"material-icons-outlined",children:"check_circle"}),Object(C.jsx)("p",{children:"Your feedback is important in helping us keep the community safe."}),Object(C.jsx)("button",{onClick:function(){r(),l(!1)},children:"Close"})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h2",{children:"Why are you reporting this comment?"}),[{icon:"delete",text:"It's a spam"},{icon:"visibility_off",text:"Nudity or sexual activity"},{icon:"healing",text:"Hate speech or symbols"},{icon:"thumb_down",text:"Violence or dangerous organizations"},{icon:"production_quantity_limits",text:"Sales or illegal or regulated goods"},{icon:"mood_bad",text:"Bullying or harassment"},{icon:"copyright",text:"Intellectual property violation"},{icon:"feedback",text:"False information"}].map((function(e){return Object(C.jsxs)("button",{className:"report-button",onClick:function(){return f(e.text)},children:[Object(C.jsx)("i",{className:"material-icons-outlined",children:e.icon}),Object(C.jsx)("span",{children:e.text})]},e.icon)}))]})]})})},Z=function(e){var n=e.groupChannelsToJoin,t=e.setCurrentChannel,r=e.hideModal,a=Object(d.b)(),i=Object(o.useState)(""),c=Object(m.a)(i,2),s=c[0],u=c[1],l=function(){var e=Object(D.a)(W.a.mark((function e(n){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.objects.setMemberships({channels:[n.id]});case 2:t(n),r();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"overlay",children:Object(C.jsxs)("div",{className:"public-channels-modal modal",children:[Object(C.jsxs)("div",{className:"header",children:[Object(C.jsx)("strong",{children:"Join a channel"}),Object(C.jsx)("button",{className:"material-icons-outlined",onClick:function(){return r()},children:"close"})]}),Object(C.jsxs)("div",{className:"filter-input",children:[Object(C.jsx)("input",{onChange:function(e){return u(e.target.value)},placeholder:"Search in channels",type:"text",value:s}),Object(C.jsx)("i",{className:"material-icons-outlined",children:"search"})]}),Object(C.jsx)("h2",{children:"Channels"}),Object(C.jsx)(j.a,{channels:n.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(s)})),onChannelSwitched:function(e){return l(e)}})]})})},$=(t(72),{id:"default",name:"Default Channel",description:"This is the default channel"});function V(){var e,n,t,r,a,i,c,s=Object(o.useState)("light"),u=Object(m.a)(s,2),l=u[0],_=u[1],f=Object(o.useState)($),p=Object(m.a)(f,2),v=p[0],g=p[1],y=Object(o.useState)(!1),O=Object(m.a)(y,2),x=O[0],w=O[1],k=Object(o.useState)(!0),E=Object(m.a)(k,2),S=E[0],A=E[1],N=Object(o.useState)(!1),z=Object(m.a)(N,2),T=z[0],M=z[1],I=Object(o.useState)(!1),P=Object(m.a)(I,2),U=P[0],R=P[1],L=Object(o.useState)(!1),q=Object(m.a)(L,2),V=q[0],H=q[1],J=Object(o.useState)(""),G=Object(m.a)(J,2),Y=G[0],K=G[1],Q=Object(o.useState)(""),X=Object(m.a)(Q,2),ee=X[0],ne=X[1],te=Object(o.useState)(),re=Object(m.a)(te,2),ae=re[0],ie=re[1],oe=Object(d.b)(),ce=oe.getUUID(),se=Object(j.l)({uuid:ce}),ue=Object(m.a)(se,1)[0],le=Object(j.n)({include:{customFields:!0}}),_e=Object(m.a)(le,1)[0],de=Object(j.j)({include:{customFields:!0}}),fe=Object(m.a)(de,1)[0],pe=Object(j.m)({include:{channelFields:!0,customChannelFields:!0}}),me=Object(m.a)(pe,3),he=me[0],be=me[2],ve=Object(j.i)({channel:v.id,include:{customUUIDFields:!0}}),ge=Object(m.a)(ve,4),je=ge[0],ye=ge[2],Oe=ge[3],xe=Object(j.k)({channels:he.map((function(e){return e.id}))}),we=null===(e=Object(m.a)(xe,1)[0][v.id])||void 0===e||null===(n=e.occupants)||void 0===n?void 0:n.map((function(e){return e.uuid})),ke=he.filter((function(e){var n,t;return(null===(n=e.id)||void 0===n?void 0:n.startsWith("space."))&&(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(Y.toLowerCase()))})),Ee=fe.filter((function(e){return e.id.startsWith("space.")&&!he.some((function(n){return e.id===n.id}))})),Se=he.filter((function(e){var n,t;return(null===(n=e.id)||void 0===n?void 0:n.startsWith("direct."))||(null===(t=e.id)||void 0===t?void 0:t.startsWith("group."))})).map((function(e){var n;if(!(null===(n=e.id)||void 0===n?void 0:n.startsWith("direct.")))return e;var t=e.id.replace(ce,"").replace("direct.","").replace("@",""),r=_e.find((function(e){return e.id===t}));return r&&(e.custom={thumb:r.profileUrl||""},e.name=r.name),e})).filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(Y.toLowerCase())})),Ae=null===ue||void 0===ue||null===(t=ue.custom)||void 0===t?void 0:t.ban,Ce=null===ue||void 0===ue||null===(r=ue.custom)||void 0===r||null===(a=r.mutedChannels)||void 0===a?void 0:a.split(",").includes(v.id),Ne=null===ue||void 0===ue||null===(i=ue.custom)||void 0===i||null===(c=i.blockedChannels)||void 0===c?void 0:c.split(",").includes(v.id),ze=function(){var e=Object(D.a)(W.a.mark((function e(n,t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,oe.objects.removeMemberships({channels:[n.id]});case 3:Me(n.id);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Te=Object(o.useCallback)((function(e){e.channel.startsWith("user_")&&be(),e.channel===v.id&&ye()}),[v,be,ye]),Me=function(e){if(v.id===e){var n=null===he||void 0===he?void 0:he.find((function(n){return n.id!==e}));n&&g(n)}};return Object(o.useEffect)((function(){"default"===v.id&&he.length&&g(he[0])}),[v,he]),Object(C.jsx)("div",{className:"app-moderated app-moderated--".concat(l),children:Object(C.jsxs)(j.b,{theme:l,users:_e,currentChannel:v.id,channels:[].concat(Object(h.a)(he.map((function(e){return e.id}))),[ce]),onError:function(e){var n,t;("PNPublishOperation"===(null===(n=e.status)||void 0===n?void 0:n.operation)&&403===(null===(t=e.status)||void 0===t?void 0:t.statusCode)||e.message.startsWith("Publish failed"))&&alert("Your message was blocked. Perhaps you tried to use offensive language or send an image that contains nudity?")},onMembership:function(e){return Te(e)},children:[T&&Object(C.jsx)(Z,{groupChannelsToJoin:Ee,hideModal:function(){return M(!1)},setCurrentChannel:g}),U&&Object(C.jsx)(F,{currentUser:ue,hideModal:function(){return R(!1)},setCurrentChannel:g,users:_e.filter((function(e){return e.id!==ce}))}),V&&Object(C.jsx)(B,{currentUser:ue,reportedMessage:ae,hideModal:function(){return H(!1)},users:_e}),Ae?Object(C.jsx)("strong",{className:"error",children:"Unfortunately, you were banned from the chat."}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"channels-panel ".concat(S&&"shown"),children:[Object(C.jsxs)("div",{className:"user-info",children:[ue&&Object(C.jsx)(j.c,{members:[ue],selfText:""}),Object(C.jsx)("button",{className:"mobile material-icons-outlined",onClick:function(){return A(!1)},children:"close"})]}),Object(C.jsxs)("div",{className:"theme-switcher",children:[Object(C.jsx)("i",{className:"material-icons-outlined",children:"brightness_4"}),Object(C.jsx)("button",{className:l,onClick:function(){return _("light"===l?"dark":"light")},children:Object(C.jsx)("span",{})})]}),Object(C.jsxs)("div",{className:"filter-input",children:[Object(C.jsx)("input",{onChange:function(e){return K(e.target.value)},placeholder:"Search in...",type:"text",value:Y}),Object(C.jsx)("i",{className:"material-icons-outlined",children:"search"})]}),Object(C.jsxs)("div",{className:"channel-lists",children:[Object(C.jsxs)("h2",{children:["Channels"," ",Object(C.jsx)("button",{className:"material-icons-outlined",onClick:function(){return M(!0)},children:"add_circle_outline"})]}),Object(C.jsx)("div",{children:Object(C.jsx)(j.a,{channels:ke,onChannelSwitched:function(e){return g(e)},extraActionsRenderer:function(e){return Object(C.jsx)("div",{onClick:function(n){return ze(e,n)},title:"Leave channel",children:Object(C.jsx)("i",{className:"material-icons-outlined small",children:"logout"})})}})}),Object(C.jsxs)("h2",{children:["Direct chats"," ",Object(C.jsx)("button",{className:"material-icons-outlined",onClick:function(){return R(!0)},children:"add_circle_outline"})]}),Object(C.jsx)("div",{children:Object(C.jsx)(j.a,{channels:Se,onChannelSwitched:function(e){return g(e)},extraActionsRenderer:function(e){return Object(C.jsx)("div",{onClick:function(n){return ze(e,n)},title:"Leave channel",children:Object(C.jsx)("i",{className:"material-icons-outlined small",children:"logout"})})}})})]})]}),Object(C.jsxs)("div",{className:"chat-window",children:[Object(C.jsxs)("div",{className:"channel-info",children:[Object(C.jsx)("button",{className:"mobile material-icons-outlined",onClick:function(){return A(!0)},children:"menu"}),Object(C.jsxs)("span",{onClick:function(){return w(!x)},children:[Object(C.jsxs)("strong",{children:[v.name||v.id,Object(C.jsx)("i",{className:"material-icons-outlined",children:"arrow_right"})]}),Object(C.jsxs)("p",{children:[Oe," members"]})]}),Object(C.jsx)("hr",{})]}),Ne?Object(C.jsx)("strong",{className:"error",children:"Unfortunately, you were blocked from this channel."}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(j.e,{fetchMessages:20,enableReactions:!0,reactionsPicker:Object(C.jsx)(b.a,{}),extraActionsRenderer:function(e){return Object(C.jsx)("div",{onClick:function(){ie(e),H(!0)},title:"Report user",children:Object(C.jsx)("i",{className:"material-icons-outlined",children:"campaign"})})},children:Object(C.jsx)(j.f,{})}),Object(C.jsx)("hr",{}),Object(C.jsx)(j.d,{disabled:Ce,typingIndicator:!0,fileUpload:"image",emojiPicker:Object(C.jsx)(b.a,{}),placeholder:Ce?"You were muted from this channel":"Send message"})]})]}),Object(C.jsxs)("div",{className:"members-panel ".concat(x?"shown":"hidden"),children:[Object(C.jsxs)("h2",{children:["Members",Object(C.jsx)("button",{className:"material-icons-outlined",onClick:function(){return w(!1)},children:"close"})]}),Object(C.jsxs)("div",{className:"filter-input",children:[Object(C.jsx)("input",{onChange:function(e){return ne(e.target.value)},placeholder:"Search in members",type:"text",value:ee}),Object(C.jsx)("i",{className:"material-icons-outlined",children:"search"})]}),Object(C.jsx)(j.c,{members:je.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(ee.toLowerCase())})),presentMembers:we})]})]})]})})}t(73);var H=t(51),J=document.location.hash.split("?")[1],G=new URLSearchParams(J),Y=G.get("uuid"),K={publishKey:G.get("pubkey"),subscribeKey:G.get("subkey")},Q=K.publishKey&&K.subscribeKey?K:H,X=new u.a(Object(i.a)(Object(i.a)({},Q),{},{uuid:Y||k[Math.floor(Math.random()*k.length)].id,fileUploadPublishRetryLimit:0})),ee=!1;X.addListener({status:function(e){"PNAccessDeniedCategory"===e.category&&(ee=!0,ae())}});var ne=function(){return Object(C.jsx)(d.a,{client:X,children:Object(C.jsx)(f.a,{children:Object(C.jsxs)(p.c,{children:[Object(C.jsx)(p.a,{path:"/group-chat",children:Object(C.jsx)(R,{})}),Object(C.jsx)(p.a,{path:"/event-chat",children:Object(C.jsx)(U,{})}),Object(C.jsx)(p.a,{path:"/simple-chat",children:Object(C.jsx)(I,{})}),Object(C.jsx)(p.a,{path:"/moderated-chat",children:Object(C.jsx)(V,{})}),Object(C.jsx)(p.a,{path:"/",children:Object(C.jsxs)("div",{className:"welcome",children:[Object(C.jsx)("h1",{children:"Pubnub Chat Components"}),Object(C.jsx)("h3",{children:"Here are some example applications built using PubNub and React Chat Components:"}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(f.b,{to:"/simple-chat",children:"Simple Chat"})}),Object(C.jsx)("li",{children:Object(C.jsx)(f.b,{to:"/moderated-chat",children:"Moderated Chat"})})]})]})})]})})})},te=function(){return Object(C.jsxs)("div",{className:"pubnub-error",children:[Object(C.jsx)("h1",{children:"Warning! PubNub access manager enabled."}),Object(C.jsx)("p",{children:"It looks like you have access manager enabled on your PubNub keyset. This sample app is not adapted to work with PAM by default."}),Object(C.jsxs)("p",{children:["You can either disable PAM in the"," ",Object(C.jsx)("a",{href:"https://dashboard.pubnub.com/",children:"PubNub Admin Portal"})," or add custom code to grant all necessary permissions by yourself. Please referer to the"," ",Object(C.jsx)("a",{href:"https://pubnub.github.io/react-chat-components/docs/?path=/story/introduction-pam--page",children:"Chat Component docs"})," ","for more information."]})]})},re=function(){return Object(C.jsxs)("div",{className:"pubnub-error",children:[Object(C.jsx)("h1",{children:"A PubNub account is required."}),Object(C.jsxs)("p",{children:["Visit the PubNub dashboard to create an account or login:",Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://dashboard.pubnub.com/",children:"https://dashboard.pubnub.com/"}),Object(C.jsx)("br",{}),"Create a new app or locate your app in the dashboard. Enable the Presence, Files, Objects, and Storage features using a region of your choosing. For Objects, ensure the following are enabled:"]}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:"User Metadata Events"}),Object(C.jsx)("li",{children:"Channel Metadata Events"}),Object(C.jsx)("li",{children:"Membership Events"})]}),Object(C.jsx)("p",{children:"Copy and paste your publish key and subscribe key into: "}),Object(C.jsx)("pre",{children:"pubnub-keys.json"}),Object(C.jsx)("p",{children:"before continuing."})]})},ae=function(){var e,n;_.a.render(Object(C.jsx)(c.a.StrictMode,{children:(null===(e=Q.publishKey)||void 0===e?void 0:e.length)&&(null===(n=Q.subscribeKey)||void 0===n?void 0:n.length)?ee?Object(C.jsx)(te,{}):Object(C.jsx)(ne,{}):Object(C.jsx)(re,{})}),document.getElementById("root"))};ae()}},[[79,1,2]]]);
//# sourceMappingURL=main.b89ec626.chunk.js.map